const $=new Env("\uD83D\uDCFA BiliBili: \uD83D\uDEE1️ ADBlock v0.5.0(1) response"),URI=new URIs,DataBase={ADBlock:{Settings:{Switch:!0,Detail:{splash:!0,feed:!0,vertical:!1,activity:!1,story:!0,cinema:!0,view:!0,search:!0,commandDms:!1,colorfulDms:!1,MainList:!0,xlive:!0,Hot_search:!0,Hot_topics:!0,Most_visited:!0,Dynamic_adcard:!0}}},Default:{Settings:{Switch:!0}}},URL=URI.parse($request.url);$.log(`⚠ ${$.name}`,`URL: ${JSON.stringify(URL)}`,"");const METHOD=$request.method,HOST=URL.host,PATH=URL.path,PATHs=URL.paths;$.log(`⚠ ${$.name}`,`METHOD: ${METHOD}`,"");const FORMAT=($response.headers?.["Content-Type"]??$response.headers?.["content-type"])?.split(";")?.[0];function setENV(e,t,n){$.log(`☑️ ${$.name}, Set Environment Variables`,"");let{Settings:i,Caches:r,Configs:a}=getENV(e,t,n);return $.log(`✅ ${$.name}, Set Environment Variables`,`Settings: ${typeof i}`,`Settings内容: ${JSON.stringify(i)}`,""),{Settings:i,Caches:r,Configs:a}}function newRawBody({header:e,body:t},n){var i;let r,a="gzip"==n?1:"identity"==n?0:void 0==n?0:e?.[0]??0,s=(i=t.length,r=new ArrayBuffer(4),new DataView(r).setUint32(0,i,!1),new Uint8Array(r));"gzip"==n&&(t=pako.gzip(t));let o=new Uint8Array(e.length+t.length);return o.set([a],0),o.set(s,1),o.set(t,5),o}function Env(e,t){return new class{constructor(e,t){this.name=e,this.http=new class e{constructor(e){this.env=e}send(e,t="GET"){e="string"==typeof e?{url:e}:e;let n=this.get;return"POST"===t&&(n=this.post),new Promise((t,i)=>{n.call(this,e,(e,n,r)=>{e?i(e):t(n)})})}get(e){return this.send.call(this.env,e)}post(e){return this.send.call(this.env,e,"POST")}}(this),this.data=null,this.dataFile="box.dat",this.logs=[],this.isMute=!1,this.isNeedRewrite=!1,this.logSeparator="\n",this.encoding="utf-8",this.startTime=(new Date).getTime(),Object.assign(this,t),this.log("",`\ud83d\udd14${this.name}, \u5f00\u59cb!`)}getEnv(){return"undefined"!=typeof $environment&&$environment["surge-version"]?"Surge":"undefined"!=typeof $environment&&$environment["stash-version"]?"Stash":"undefined"!=typeof module&&module.exports?"Node.js":"undefined"!=typeof $task?"Quantumult X":"undefined"!=typeof $loon?"Loon":"undefined"!=typeof $rocket?"Shadowrocket":void 0}isNode(){return"Node.js"===this.getEnv()}isQuanX(){return"Quantumult X"===this.getEnv()}isSurge(){return"Surge"===this.getEnv()}isLoon(){return"Loon"===this.getEnv()}isShadowrocket(){return"Shadowrocket"===this.getEnv()}isStash(){return"Stash"===this.getEnv()}toObj(e,t=null){try{return JSON.parse(e)}catch{return t}}toStr(e,t=null){try{return JSON.stringify(e)}catch{return t}}getjson(e,t){let n=t,i=this.getdata(e);if(i)try{n=JSON.parse(this.getdata(e))}catch{}return n}setjson(e,t){try{return this.setdata(JSON.stringify(e),t)}catch{return!1}}getScript(e){return new Promise(t=>{this.get({url:e},(e,n,i)=>t(i))})}runScript(e,t){return new Promise(n=>{let i=this.getdata("@chavy_boxjs_userCfgs.httpapi");i=i?i.replace(/\n/g,"").trim():i;let r=this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout");r=r?1*r:20,r=t&&t.timeout?t.timeout:r;let[a,s]=i.split("@"),o={url:`http://${s}/v1/scripting/evaluate`,body:{script_text:e,mock_type:"cron",timeout:r},headers:{"X-Key":a,Accept:"*/*"},timeout:r};this.post(o,(e,t,i)=>n(i))}).catch(e=>this.logErr(e))}loaddata(){if(!this.isNode())return{};{this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");let e=this.path.resolve(this.dataFile),t=this.path.resolve(process.cwd(),this.dataFile),n=this.fs.existsSync(e),i=!n&&this.fs.existsSync(t);if(!n&&!i)return{};try{return JSON.parse(this.fs.readFileSync(n?e:t))}catch(r){return{}}}}writedata(){if(this.isNode()){this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");let e=this.path.resolve(this.dataFile),t=this.path.resolve(process.cwd(),this.dataFile),n=this.fs.existsSync(e),i=!n&&this.fs.existsSync(t),r=JSON.stringify(this.data);n?this.fs.writeFileSync(e,r):i?this.fs.writeFileSync(t,r):this.fs.writeFileSync(e,r)}}lodash_get(e,t,n){let i=t.replace(/\[(\d+)\]/g,".$1").split("."),r=e;for(let a of i)if(void 0===(r=Object(r)[a]))return n;return r}lodash_set(e,t,n){return Object(e)!==e||(Array.isArray(t)||(t=t.toString().match(/[^.[\]]+/g)||[]),t.slice(0,-1).reduce((e,n,i)=>Object(e[n])===e[n]?e[n]:e[n]=Math.abs(t[i+1])>>0==+t[i+1]?[]:{},e)[t[t.length-1]]=n),e}getdata(e){let t=this.getval(e);if(/^@/.test(e)){let[,n,i]=/^@(.*?)\.(.*?)$/.exec(e),r=n?this.getval(n):"";if(r)try{let a=JSON.parse(r);t=a?this.lodash_get(a,i,""):t}catch(s){t=""}}return t}setdata(e,t){let n=!1;if(/^@/.test(t)){let[,i,r]=/^@(.*?)\.(.*?)$/.exec(t),a=this.getval(i);try{let s=JSON.parse(i?"null"===a?null:a||"{}":"{}");this.lodash_set(s,r,e),n=this.setval(JSON.stringify(s),i)}catch(o){let l={};this.lodash_set(l,r,e),n=this.setval(JSON.stringify(l),i)}}else n=this.setval(e,t);return n}getval(e){switch(this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":return $persistentStore.read(e);case"Quantumult X":return $prefs.valueForKey(e);case"Node.js":return this.data=this.loaddata(),this.data[e];default:return this.data&&this.data[e]||null}}setval(e,t){switch(this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":return $persistentStore.write(e,t);case"Quantumult X":return $prefs.setValueForKey(e,t);case"Node.js":return this.data=this.loaddata(),this.data[t]=e,this.writedata(),!0;default:return this.data&&this.data[t]||null}}initGotEnv(e){this.got=this.got?this.got:require("got"),this.cktough=this.cktough?this.cktough:require("tough-cookie"),this.ckjar=this.ckjar?this.ckjar:new this.cktough.CookieJar,e&&(e.headers=e.headers?e.headers:{},void 0===e.headers.Cookie&&void 0===e.cookieJar&&(e.cookieJar=this.ckjar))}get(e,t=()=>{}){switch(e.headers&&(delete e.headers["Content-Type"],delete e.headers["Content-Length"],delete e.headers["content-type"],delete e.headers["content-length"]),this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":default:this.isSurge()&&this.isNeedRewrite&&(e.headers=e.headers||{},Object.assign(e.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient.get(e,(e,n,i)=>{!e&&n&&(n.body=i,n.statusCode=n.status?n.status:n.statusCode,n.status=n.statusCode),t(e,n,i)});break;case"Quantumult X":this.isNeedRewrite&&(e.opts=e.opts||{},Object.assign(e.opts,{hints:!1})),$task.fetch(e).then(e=>{let{statusCode:n,statusCode:i,headers:r,body:a,bodyBytes:s}=e;t(null,{status:n,statusCode:i,headers:r,body:a,bodyBytes:s},a,s)},e=>t(e&&e.error||"UndefinedError"));break;case"Node.js":let n=require("iconv-lite");this.initGotEnv(e),this.got(e).on("redirect",(e,t)=>{try{if(e.headers["set-cookie"]){let n=e.headers["set-cookie"].map(this.cktough.Cookie.parse).toString();n&&this.ckjar.setCookieSync(n,null),t.cookieJar=this.ckjar}}catch(i){this.logErr(i)}}).then(e=>{let{statusCode:i,statusCode:r,headers:a,rawBody:s}=e,o=n.decode(s,this.encoding);t(null,{status:i,statusCode:r,headers:a,rawBody:s,body:o},o)},e=>{let{message:i,response:r}=e;t(i,r,r&&n.decode(r.rawBody,this.encoding))})}}post(e,t=()=>{}){let n=e.method?e.method.toLocaleLowerCase():"post";switch(e.body&&e.headers&&!e.headers["Content-Type"]&&!e.headers["content-type"]&&(e.headers["content-type"]="application/x-www-form-urlencoded"),e.headers&&(delete e.headers["Content-Length"],delete e.headers["content-length"]),this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":default:this.isSurge()&&this.isNeedRewrite&&(e.headers=e.headers||{},Object.assign(e.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient[n](e,(e,n,i)=>{!e&&n&&(n.body=i,n.statusCode=n.status?n.status:n.statusCode,n.status=n.statusCode),t(e,n,i)});break;case"Quantumult X":e.method=n,this.isNeedRewrite&&(e.opts=e.opts||{},Object.assign(e.opts,{hints:!1})),$task.fetch(e).then(e=>{let{statusCode:n,statusCode:i,headers:r,body:a,bodyBytes:s}=e;t(null,{status:n,statusCode:i,headers:r,body:a,bodyBytes:s},a,s)},e=>t(e&&e.error||"UndefinedError"));break;case"Node.js":let i=require("iconv-lite");this.initGotEnv(e);let{url:r,...a}=e;this.got[n](r,a).then(e=>{let{statusCode:n,statusCode:r,headers:a,rawBody:s}=e,o=i.decode(s,this.encoding);t(null,{status:n,statusCode:r,headers:a,rawBody:s,body:o},o)},e=>{let{message:n,response:r}=e;t(n,r,r&&i.decode(r.rawBody,this.encoding))})}}time(e,t=null){let n=t?new Date(t):new Date,i={"M+":n.getMonth()+1,"d+":n.getDate(),"H+":n.getHours(),"m+":n.getMinutes(),"s+":n.getSeconds(),"q+":Math.floor((n.getMonth()+3)/3),S:n.getMilliseconds()};for(let r in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(n.getFullYear()+"").substr(4-RegExp.$1.length))),i)RegExp("("+r+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?i[r]:("00"+i[r]).substr((""+i[r]).length)));return e}queryStr(e){let t="";for(let n in e){let i=e[n];null!=i&&""!==i&&("object"==typeof i&&(i=JSON.stringify(i)),t+=`${n}=${i}&`)}return t.substring(0,t.length-1)}msg(t=e,n="",i="",r){let a=e=>{switch(typeof e){case void 0:return e;case"string":switch(this.getEnv()){case"Surge":case"Stash":default:return{url:e};case"Loon":case"Shadowrocket":return e;case"Quantumult X":return{"open-url":e};case"Node.js":return}case"object":switch(this.getEnv()){case"Surge":case"Stash":case"Shadowrocket":default:return{url:e.url||e.openUrl||e["open-url"]};case"Loon":{let t;return{openUrl:e.openUrl||e.url||e["open-url"],mediaUrl:e.mediaUrl||e["media-url"]}}case"Quantumult X":{let n=e["open-url"]||e.url||e.openUrl,i;return{"open-url":n,"media-url":e["media-url"]||e.mediaUrl,"update-pasteboard":e["update-pasteboard"]||e.updatePasteboard}}case"Node.js":return}default:return}};if(!this.isMute)switch(this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":default:$notification.post(t,n,i,a(r));break;case"Quantumult X":$notify(t,n,i,a(r));case"Node.js":}if(!this.isMuteLog){let s=["","==============\ud83d\udce3系统通知\ud83d\udce3=============="];s.push(t),n&&s.push(n),i&&s.push(i),console.log(s.join("\n")),this.logs=this.logs.concat(s)}}log(...e){e.length>0&&(this.logs=[...this.logs,...e]),console.log(e.join(this.logSeparator))}logErr(e,t){switch(this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":case"Quantumult X":default:this.log("",`\u2757\ufe0f${this.name}, \u9519\u8bef!`,e);break;case"Node.js":this.log("",`\u2757\ufe0f${this.name}, \u9519\u8bef!`,e.stack)}}wait(e){return new Promise(t=>setTimeout(t,e))}done(e={}){let t=(new Date).getTime(),n=(t-this.startTime)/1e3;switch(this.log("",`\ud83d\udd14${this.name}, \u7ed3\u675f! \ud83d\udd5b ${n} \u79d2`),this.log(),this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":case"Quantumult X":default:$done(e);break;case"Node.js":process.exit(1)}}}(e,t)}function getENV(e,t,n){let i=$.getjson(e,n),r={};if("undefined"!=typeof $argument&&Boolean($argument)){let a=Object.fromEntries($argument.split("&").map(e=>e.split("=").map(e=>e.replace(/\"/g,""))));for(let s in a)d(r,s,a[s])}let o={Settings:n?.Default?.Settings||{},Configs:n?.Default?.Configs||{},Caches:{}};for(let l of(Array.isArray(t)||(t=[t]),t))o.Settings={...o.Settings,...n?.[l]?.Settings,...r,...i?.[l]?.Settings},o.Configs={...o.Configs,...n?.[l]?.Configs},i?.[l]?.Caches&&"string"==typeof i?.[l]?.Caches&&(i[l].Caches=JSON.parse(i?.[l]?.Caches)),o.Caches={...o.Caches,...i?.[l]?.Caches};return function e(t,n){for(var i in t){var r=t[i];t[i]="object"==typeof r&&null!==r?e(r,n):n(i,r)}return t}(o.Settings,(e,t)=>("true"===t||"false"===t?t=JSON.parse(t):"string"==typeof t&&(t=t.includes(",")?t.split(",").map(e=>h(e)):h(t)),t)),o;function d(e,t,n){t.split(".").reduce((e,i,r)=>e[i]=t.split(".").length===++r?n:e[i]||{},e)}function h(e){return e&&!isNaN(e)&&(e=parseInt(e,10)),e}}function URIs(e){return new class{constructor(e=[]){this.name="URI v1.2.6",this.opts=e,this.json={scheme:"",host:"",path:"",query:{}}}parse(e){let t=e.match(/(?:(?<scheme>.+):\/\/(?<host>[^/]+))?\/?(?<path>[^?]+)?\??(?<query>[^?]+)?/)?.groups??null;if(t?.path?t.paths=t.path.split("/"):t.path="",t?.paths){let n=t.paths[t.paths.length-1];if(n?.includes(".")){let i=n.split(".");t.format=i[i.length-1]}}return t?.query&&(t.query=Object.fromEntries(t.query.split("&").map(e=>e.split("=")))),t}stringify(e=this.json){let t="";return e?.scheme&&e?.host&&(t+=e.scheme+"://"+e.host),e?.path&&(t+=e?.host?"/"+e.path:e.path),e?.query&&(t+="?"+Object.entries(e.query).map(e=>e.join("=")).join("&")),t}}(e)}$.log(`⚠ ${$.name}`,`FORMAT: ${FORMAT}`,""),(async()=>{let{Settings:e,Caches:t,Configs:n}=setENV("BiliBili","ADBlock",DataBase);switch($.log(`⚠ ${$.name}`,`Settings.Switch: ${e?.Switch}`,""),e.Switch){case!0:default:let i={code:0,message:"0",data:{}};switch(FORMAT){case void 0:case"application/x-www-form-urlencoded":case"text/plain":case"text/html":default:case"application/x-mpegURL":case"application/x-mpegurl":case"application/vnd.apple.mpegurl":case"audio/mpegurl":case"text/xml":case"text/plist":case"application/xml":case"application/plist":case"application/x-plist":break;case"text/json":case"application/json":switch(i=JSON.parse($response.body??"{}"),HOST){case"www.bilibili.com":break;case"app.bilibili.com":case"app.biliapi.net":switch(PATH){case"x/v2/splash/show":case"x/v2/splash/list":case"x/v2/splash/brand/list":case"x/v2/splash/event/list2":switch(e?.Detail?.splash){case!0:default:let r=["account","event_list","preload","show"];i.data&&(r.forEach(e=>{delete i.data[e]}),$.log(`🎉 ${$.name}`,"开屏页广告去除"));break;case!1:$.log(`🚧 ${$.name}`,"用户设置开屏页广告不去除")}break;case"x/v2/feed/index":switch(e?.Detail?.feed){case!0:default:async function a(){let e=$.getdata("@BiliBili.Index.Caches",""),t={};if(e&&e.length>0)t=e.pop(),$.log(`🎉 ${$.name}`,"推荐页空缺位填充成功");else{let n={url:$request.url,headers:$request.heders};await $.http.get(n).then(e=>{try{let t=$.toObj(e.body);t?.code===0&&t?.message==="0"?(t.data.items=t.data.items.map(e=>{let{card_type:t,card_goto:n,goto:i}=e;if(t&&n){if("banner_v8"===t&&"banner"===n)return;if("cm_v2"===t&&["ad_web_s","ad_av","ad_web_gif","ad_player","ad_inline_3d","ad_inline_eggs","ad_inline_live"].includes(n))return;if("small_cover_v10"===t&&"game"===n)return;else if("cm_double_v9"===t&&"ad_inline_av"===n)return;else if("large_cover_v9"===t&&"inline_av_v2"===n)return;else if("vertical_av"===i)return}return e}).filter(e=>void 0!==e),$.setdata(t.data.items,"@BiliBili.Index.Caches"),$.log(`🎉 ${$.name}`,"推荐页缓存数组补充成功")):$.log(`🚧 ${$.name}`,"访问推荐页尝试填补失败")}catch(n){$.logErr(n,e)}}),(e=$.getdata("@BiliBili.Index.Caches","")).length>0&&(t=e.pop(),$.log(`🎉 ${$.name}`,"推荐页空缺位填充成功"))}return $.setdata(e,"@BiliBili.Index.Caches"),t}i.data.items?.length&&(i.data.items=await Promise.all(i.data.items.map(async n=>{let{card_type:i,card_goto:r,goto:s}=n;if(i&&r){if(["banner_v8","banner_ipad_v8"].includes(i)&&"banner"===r)switch(e?.Detail?.activity){case!0:default:t.banner_hash=n.hash,$.setjson(t,"@BiliBili.ADBlock.Caches"),$.log(`🎉 ${$.name}`,"推荐页活动大图去除");return;case!1:n.banner_item&&(n.banner_item=n.banner_item.filter(e=>"ad"!==e.type||($.log(`🎉 ${$.name}`,"推荐页大图广告去除"),!1)))}else if(["cm_v2","cm_v1"].includes(i)&&["ad_web_s","ad_av","ad_web_gif"].includes(r)){if($.log(`🎉 ${$.name}`,`${r}广告去除`),URL.query?.device!=="phone")return;await a().then(e=>n=e)}else if("live"===r&&"small_cover_v9"===i){let o=e?.Detail?.blockUpLiveList;"number"==typeof o&&(o=o.toString()),o&&o.includes(n?.args?.up_id?.toString())&&($.log(`🎉 ${$.name}`,`屏蔽Up主<${n?.args?.up_name}>直播推广`),await a().then(e=>n=e))}else if("cm_v2"===i&&["ad_player","ad_inline_3d","ad_inline_eggs","ad_inline_live"].includes(r)){$.log(`🎉 ${$.name}`,`${r}广告去除`);return}else if("small_cover_v10"===i&&"game"===r){if($.log(`🎉 ${$.name}`,"游戏广告去除"),URL.query?.device!=="phone")return;await a().then(e=>n=e)}else if("cm_double_v9"===i&&"ad_inline_av"===r){$.log(`🎉 ${$.name}`,"大视频广告去除");return}else if("vertical_av"===s)switch(e?.Detail?.vertical){case!0:default:$.log(`🎉 ${$.name}`,"竖屏视频去除"),await a().then(e=>n=e);break;case!1:$.log(`🚧 ${$.name}`,"用户设置推荐页竖屏视频不去除")}}return n})),i.data.items=i.data.items.filter(e=>void 0!==e));break;case!1:$.log(`🚧 ${$.name}`,"用户设置推荐页广告不去除")}break;case"x/v2/feed/index/story":switch(e?.Detail?.story){case!0:default:i.data?.items&&(i.data.items=i.data.items.filter(e=>!(e.hasOwnProperty("ad_info")||["vertical_ad_av","vertical_pgc"].includes(e.card_goto))),$.log(`🎉 ${$.name}`,"首页短视频流广告去除"));break;case!1:$.log(`🚧 ${$.name}`,"用户设置首页短视频流广告不去除")}break;case"x/v2/search/square":switch(e?.Detail?.Hot_search){case!0:default:i.data=i.data.filter(e=>"trending"!==e.type),$.log(`🎉 ${$.name}`,"搜索页热搜内容去除");break;case!1:$.log(`🚧 ${$.name}`,"用户设置搜索页热搜内容不去除")}}break;case"api.bilibili.com":case"api.biliapi.net":switch(PATH){case"pgc/player/api/playurl":case"pgc/player/web/playurl":case"pgc/player/web/playurl/html5":case"x/player/wbi/playurl":case"pgc/view/v2/app/season":break;case"pgc/page/bangumi":case"pgc/page/cinema/tab":switch(e?.Detail?.cinema){case!0:default:i.result?.modules&&(i.result.modules.forEach(e=>{e.style.startsWith("banner")?e.items=e.items.filter(e=>e.link.includes("play")):e.style.startsWith("function")?e.items=e.items.filter(e=>e.blink.startsWith("bilibili")):[241,1283,1284,1441].includes(e.module_id)?e.items=[]:e.style.startsWith("tip")&&(e.items=[])}),$.log(`🎉 ${$.name}`,"观影页广告去除"));break;case!1:$.log(`🚧 ${$.name}`,"用户设置观影页广告不去除")}break;case"x/web-interface/wbi/index/top/feed/rcmd":switch(e?.Detail?.feed){case!0:default:i.data.item=i.data.item.filter(e=>"ad"!==e.goto),$.log(`🎉 ${$.name}`,"首页广告内容去除");break;case!1:$.log(`🚧 ${$.name}`,"用户设置首页广告不去除")}break;case"x/space/acc/info":case"x/space/wbi/acc/info":URL.query?.vmid||URL.query?.mid}break;case"api.live.bilibili.com":if("xlive/app-room/v1/index/getInfoByRoom"===PATH)switch(e?.Detail?.xlive){case!0:default:i.data?.activity_banner_info&&(i.data.activity_banner_info=null,$.log(`🎉 ${$.name}`,"直播banner广告去除")),i.data?.shopping_info&&(i.data.shopping_info={is_show:0},$.log(`🎉 ${$.name}`,"直播购物广告去除")),i.data?.new_tab_info?.outer_list?.length>0&&(i.data.new_tab_info.outer_list=i.data.new_tab_info.outer_list.filter(e=>33!==e.biz_id));break;case!1:$.log(`🚧 ${$.name}`,"用户设置直播页广告不去除")}}$response.body=JSON.stringify(i);break;case"application/protobuf":case"application/x-protobuf":case"application/vnd.google.protobuf":case"application/grpc":case"application/grpc+proto":case"applecation/octet-stream":let s=$.isQuanX()?new Uint8Array($response.bodyBytes??[]):$response.body??new Uint8Array;(function(e){"use strict";function t(e,t,n){return t<=e&&e<=n}"undefined"!=typeof module&&module.exports&&!e["encoding-indexes"]&&(e["encoding-indexes"]=require("./encoding-indexes.js")["encoding-indexes"]);var n=Math.floor;function i(e){if(void 0===e)return{};if(e===Object(e))return e;throw TypeError("Could not convert argument to dictionary")}function r(e){return 0<=e&&e<=127}var a=r;function s(e){this.tokens=[].slice.call(e),this.tokens.reverse()}function o(e,t){if(e)throw TypeError("Decoder error");return t||65533}function l(e){throw TypeError("The code point "+e+" could not be encoded.")}function d(e){return e=String(e).trim().toLowerCase(),Object.prototype.hasOwnProperty.call(f,e)?f[e]:null}s.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.pop():-1},prepend:function(e){if(Array.isArray(e))for(var t=e;t.length;)this.tokens.push(t.pop());else this.tokens.push(e)},push:function(e){if(Array.isArray(e))for(var t=e;t.length;)this.tokens.unshift(t.shift());else this.tokens.unshift(e)}};var h,u,c=[{encodings:[{labels:["unicode-1-1-utf-8","utf-8","utf8"],name:"UTF-8"}],heading:"The Encoding"},{encodings:[{labels:["866","cp866","csibm866","ibm866"],name:"IBM866"},{labels:["csisolatin2","iso-8859-2","iso-ir-101","iso8859-2","iso88592","iso_8859-2","iso_8859-2:1987","l2","latin2"],name:"ISO-8859-2"},{labels:["csisolatin3","iso-8859-3","iso-ir-109","iso8859-3","iso88593","iso_8859-3","iso_8859-3:1988","l3","latin3"],name:"ISO-8859-3"},{labels:["csisolatin4","iso-8859-4","iso-ir-110","iso8859-4","iso88594","iso_8859-4","iso_8859-4:1988","l4","latin4"],name:"ISO-8859-4"},{labels:["csisolatincyrillic","cyrillic","iso-8859-5","iso-ir-144","iso8859-5","iso88595","iso_8859-5","iso_8859-5:1988"],name:"ISO-8859-5"},{labels:["arabic","asmo-708","csiso88596e","csiso88596i","csisolatinarabic","ecma-114","iso-8859-6","iso-8859-6-e","iso-8859-6-i","iso-ir-127","iso8859-6","iso88596","iso_8859-6","iso_8859-6:1987"],name:"ISO-8859-6"},{labels:["csisolatingreek","ecma-118","elot_928","greek","greek8","iso-8859-7","iso-ir-126","iso8859-7","iso88597","iso_8859-7","iso_8859-7:1987","sun_eu_greek"],name:"ISO-8859-7"},{labels:["csiso88598e","csisolatinhebrew","hebrew","iso-8859-8","iso-8859-8-e","iso-ir-138","iso8859-8","iso88598","iso_8859-8","iso_8859-8:1988","visual"],name:"ISO-8859-8"},{labels:["csiso88598i","iso-8859-8-i","logical"],name:"ISO-8859-8-I"},{labels:["csisolatin6","iso-8859-10","iso-ir-157","iso8859-10","iso885910","l6","latin6"],name:"ISO-8859-10"},{labels:["iso-8859-13","iso8859-13","iso885913"],name:"ISO-8859-13"},{labels:["iso-8859-14","iso8859-14","iso885914"],name:"ISO-8859-14"},{labels:["csisolatin9","iso-8859-15","iso8859-15","iso885915","iso_8859-15","l9"],name:"ISO-8859-15"},{labels:["iso-8859-16"],name:"ISO-8859-16"},{labels:["cskoi8r","koi","koi8","koi8-r","koi8_r"],name:"KOI8-R"},{labels:["koi8-ru","koi8-u"],name:"KOI8-U"},{labels:["csmacintosh","mac","macintosh","x-mac-roman"],name:"macintosh"},{labels:["dos-874","iso-8859-11","iso8859-11","iso885911","tis-620","windows-874"],name:"windows-874"},{labels:["cp1250","windows-1250","x-cp1250"],name:"windows-1250"},{labels:["cp1251","windows-1251","x-cp1251"],name:"windows-1251"},{labels:["ansi_x3.4-1968","ascii","cp1252","cp819","csisolatin1","ibm819","iso-8859-1","iso-ir-100","iso8859-1","iso88591","iso_8859-1","iso_8859-1:1987","l1","latin1","us-ascii","windows-1252","x-cp1252"],name:"windows-1252"},{labels:["cp1253","windows-1253","x-cp1253"],name:"windows-1253"},{labels:["cp1254","csisolatin5","iso-8859-9","iso-ir-148","iso8859-9","iso88599","iso_8859-9","iso_8859-9:1989","l5","latin5","windows-1254","x-cp1254"],name:"windows-1254"},{labels:["cp1255","windows-1255","x-cp1255"],name:"windows-1255"},{labels:["cp1256","windows-1256","x-cp1256"],name:"windows-1256"},{labels:["cp1257","windows-1257","x-cp1257"],name:"windows-1257"},{labels:["cp1258","windows-1258","x-cp1258"],name:"windows-1258"},{labels:["x-mac-cyrillic","x-mac-ukrainian"],name:"x-mac-cyrillic"}],heading:"Legacy single-byte encodings"},{encodings:[{labels:["chinese","csgb2312","csiso58gb231280","gb2312","gb_2312","gb_2312-80","gbk","iso-ir-58","x-gbk"],name:"GBK"},{labels:["gb18030"],name:"gb18030"}],heading:"Legacy multi-byte Chinese (simplified) encodings"},{encodings:[{labels:["big5","big5-hkscs","cn-big5","csbig5","x-x-big5"],name:"Big5"}],heading:"Legacy multi-byte Chinese (traditional) encodings"},{encodings:[{labels:["cseucpkdfmtjapanese","euc-jp","x-euc-jp"],name:"EUC-JP"},{labels:["csiso2022jp","iso-2022-jp"],name:"ISO-2022-JP"},{labels:["csshiftjis","ms932","ms_kanji","shift-jis","shift_jis","sjis","windows-31j","x-sjis"],name:"Shift_JIS"}],heading:"Legacy multi-byte Japanese encodings"},{encodings:[{labels:["cseuckr","csksc56011987","euc-kr","iso-ir-149","korean","ks_c_5601-1987","ks_c_5601-1989","ksc5601","ksc_5601","windows-949"],name:"EUC-KR"}],heading:"Legacy multi-byte Korean encodings"},{encodings:[{labels:["csiso2022kr","hz-gb-2312","iso-2022-cn","iso-2022-cn-ext","iso-2022-kr"],name:"replacement"},{labels:["utf-16be"],name:"UTF-16BE"},{labels:["utf-16","utf-16le"],name:"UTF-16LE"},{labels:["x-user-defined"],name:"x-user-defined"}],heading:"Legacy miscellaneous encodings"}],f={},p=(c.forEach(function(e){e.encodings.forEach(function(e){e.labels.forEach(function(t){f[t]=e})})}),{}),_={};function m(e,t){return t&&t[e]||null}function g(e,t){return -1===(t=t.indexOf(e))?null:t}function w(t){if("encoding-indexes"in e)return e["encoding-indexes"][t];throw Error("Indexes missing. Did you forget to include encoding-indexes.js first?")}var b="utf-8";function y(e,t){if(!(this instanceof y))throw TypeError("Called as a function. Did you forget 'new'?");e=void 0!==e?String(e):b,t=i(t),this._encoding=null,this._decoder=null,this._ignoreBOM=!1,this._BOMseen=!1,this._error_mode="replacement",this._do_not_flush=!1;var n=d(e);if(null===n||"replacement"===n.name)throw RangeError("Unknown encoding: "+e);if(_[n.name])return(e=this)._encoding=n,Boolean(t.fatal)&&(e._error_mode="fatal"),Boolean(t.ignoreBOM)&&(e._ignoreBOM=!0),Object.defineProperty||(this.encoding=e._encoding.name.toLowerCase(),this.fatal="fatal"===e._error_mode,this.ignoreBOM=e._ignoreBOM),e;throw Error("Decoder not present. Did you forget to include encoding-indexes.js first?")}function k(t,n){if(!(this instanceof k))throw TypeError("Called as a function. Did you forget 'new'?");if(n=i(n),this._encoding=null,this._encoder=null,this._do_not_flush=!1,this._fatal=Boolean(n.fatal)?"fatal":"replacement",Boolean(n.NONSTANDARD_allowLegacyEncoding)){if(null===(n=d(t=void 0!==t?String(t):b))||"replacement"===n.name)throw RangeError("Unknown encoding: "+t);if(!p[n.name])throw Error("Encoder not present. Did you forget to include encoding-indexes.js first?");this._encoding=n}else this._encoding=d("utf-8"),void 0!==t&&"console"in e&&console.warn("TextEncoder constructor called with encoding label, which is ignored.");return Object.defineProperty||(this.encoding=this._encoding.name.toLowerCase()),this}function v(e){var n=e.fatal,i=0,r=0,a=0,s=128,l=191;this.handler=function(e,d){var h;if(-1===d&&0!==a)return a=0,o(n);if(-1===d)return -1;if(0===a){if(t(d,0,127))return d;if(t(d,194,223))a=1,i=31&d;else if(t(d,224,239))224===d&&(s=160),237===d&&(l=159),a=2,i=15&d;else{if(!t(d,240,244))return o(n);240===d&&(s=144),244===d&&(l=143),a=3,i=7&d}return null}return t(d,s,l)?(s=128,l=191,i=i<<6|63&d,(r+=1)!==a?null:(h=i,i=a=r=0,h)):(i=a=r=0,s=128,l=191,e.prepend(d),o(n))}}function B(e){e.fatal,this.handler=function(e,n){if(-1===n)return -1;if(a(n))return n;t(n,128,2047)?(i=1,r=192):t(n,2048,65535)?(i=2,r=224):t(n,65536,1114111)&&(i=3,r=240);for(var i,r,s=[(n>>6*i)+r];0<i;)s.push(128|63&n>>6*(i-1)),--i;return s}}function N(e,t){var n=t.fatal;this.handler=function(t,i){return -1===i?-1:r(i)?i:null===(i=e[i-128])?o(n):i}}function T(e,t){t.fatal,this.handler=function(t,n){var i;return -1===n?-1:a(n)?n:(null===(i=g(n,e))&&l(n),i+128)}}function x(e){var n=e.fatal,i=0,a=0,s=0;this.handler=function(e,l){var d,h,u;return -1===l&&0===i&&0===a&&0===s?-1:(-1!==l||0===i&&0===a&&0===s||(s=a=i=0,o(n)),0!==s?(d=null,t(l,48,57)&&(d=function(e){if(39419<e&&e<189e3||1237575<e)return null;if(7457===e)return 59335;for(var t=0,n=0,i=w("gb18030-ranges"),r=0;r<i.length;++r){var a=i[r];if(!(a[0]<=e))break;t=a[0],n=a[1]}return n+e-t}(10*(126*(10*(i-129)+a-48)+s-129)+l-48)),h=[a,s,l],s=a=i=0,null===d?(e.prepend(h),o(n)):d):0!==a?t(l,129,254)?(s=l,null):(e.prepend([a,l]),a=i=0,o(n)):0!==i?t(l,48,57)?(a=l,null):(h=i,i=0,(u=null)===(d=null===(u=t(l,64,126)||t(l,128,254)?190*(h-129)+(l-(l<127?64:65)):u)?null:m(u,w("gb18030")))&&r(l)&&e.prepend(l),null===d?o(n):d):r(l)?l:128===l?8364:t(l,129,254)?(i=l,null):o(n))}}function R(e,t){e.fatal,this.handler=function(e,i){var r,s;return -1===i?-1:a(i)?i:58853===i?l(i):t&&8364===i?128:null!==(r=g(i,w("gb18030")))?(s=r%190,[n(r/190)+129,s+(s<63?64:65)]):t?l(i):[(s=n((r=function(e){if(59335===e)return 7457;for(var t=0,n=0,i=w("gb18030-ranges"),r=0;r<i.length;++r){var a=i[r];if(!(a[1]<=e))break;t=a[1],n=a[0]}return n+e-t}(i))/10/126/10))+129,(i=n((r-=10*s*1260)/10/126))+48,(s=n((r-=10*i*126)/10))+129,48+(r-10*s)]}}function I(e){var n=e.fatal,i=0;this.handler=function(e,a){if(-1===a&&0!==i)return i=0,o(n);if(-1===a&&0===i)return -1;if(0===i)return r(a)?a:t(a,129,254)?(i=a,null):o(n);var s=i,l=null;switch(i=0,l=t(a,64,126)||t(a,161,254)?157*(s-129)+(a-(a<127?64:98)):l){case 1133:return[202,772];case 1135:return[202,780];case 1164:return[234,772];case 1166:return[234,780]}return null===(s=null===l?null:m(l,w("big5")))&&r(a)&&e.prepend(a),null===s?o(n):s}}function E(e){e.fatal,this.handler=function(e,t){var i,r;return -1===t?-1:a(t)?t:(i=t,r=u=u||w("big5").map(function(e,t){return t<5024?null:e}),null===(i=9552===i||9566===i||9569===i||9578===i||21313===i||21317===i?r.lastIndexOf(i):g(i,r))||(r=n(i/157)+129)<161?l(t):[r,(t=i%157)+(t<63?64:98)])}}function U(e){var n=e.fatal,i=!1,a=0;this.handler=function(e,s){var l,d;return -1===s&&0!==a?(a=0,o(n)):-1===s&&0===a?-1:142===a&&t(s,161,223)?(a=0,65216+s):143===a&&t(s,161,254)?(i=!0,a=s,null):0!==a?(l=a,a=0,d=null,t(l,161,254)&&t(s,161,254)&&(d=m(94*(l-161)+(s-161),w(i?"jis0212":"jis0208"))),i=!1,t(s,161,254)||e.prepend(s),null===d?o(n):d):r(s)?s:142===s||143===s||t(s,161,254)?(a=s,null):o(n)}}function S(e){e.fatal,this.handler=function(e,i){var r;return -1===i?-1:a(i)?i:165===i?92:8254===i?126:t(i,65377,65439)?[142,i-65377+161]:null===(r=g(i=8722===i?65293:i,w("jis0208")))?l(i):[n(r/94)+161,r%94+161]}}function D(e){var n=e.fatal,i=0,r=0,a=!1;this.handler=function(e,s){switch(i){default:case 0:return 27===s?(i=5,null):t(s,0,127)&&14!==s&&15!==s&&27!==s?(a=!1,s):-1===s?-1:(a=!1,o(n));case 1:return 27===s?(i=5,null):92===s?(a=!1,165):126===s?(a=!1,8254):t(s,0,127)&&14!==s&&15!==s&&27!==s&&92!==s&&126!==s?(a=!1,s):-1===s?-1:(a=!1,o(n));case 2:return 27===s?(i=5,null):t(s,33,95)?(a=!1,65344+s):-1===s?-1:(a=!1,o(n));case 3:return 27===s?(i=5,null):t(s,33,126)?(a=!1,r=s,i=4,null):-1===s?-1:(a=!1,o(n));case 4:if(27===s)i=5;else{if(t(s,33,126))return i=3,null===(l=m(94*(r-33)+s-33,w("jis0208")))?o(n):l;-1===s?(i=3,e.prepend(s)):i=3}return o(n);case 5:return 36===s||40===s?(r=s,i=6,null):(e.prepend(s),a=!1,i=0,o(n));case 6:var l=r,d=(r=0,null);return(40===l&&66===s&&(d=0),40===l&&74===s&&(d=1),40===l&&73===s&&(d=2),null!==(d=36!==l||64!==s&&66!==s?d:3))?(i=d,d=a,a=!0,d?o(n):null):(e.prepend([l,s]),a=!1,i=0,o(n))}}}function L(e){e.fatal;var t=0;this.handler=function(e,i){var r;if(-1===i&&0!==t)return e.prepend(i),t=0,[27,40,66];if(-1===i&&0===t)return -1;if(!(0!==t&&1!==t||14!==i&&15!==i&&27!==i))return l(65533);if(0===t&&a(i))return i;if(1===t&&(a(i)&&92!==i&&126!==i||165==i||8254==i)){if(a(i))return i;if(165===i)return 92;if(8254===i)return 126}return a(i)&&0!==t?(e.prepend(i),t=0,[27,40,66]):165!==i&&8254!==i||1===t?null===(r=g(i=8722===i?65293:i,w("jis0208")))?l(i):2!==t?(e.prepend(i),t=2,[27,36,66]):[n(r/94)+33,r%94+33]:(e.prepend(i),t=1,[27,40,74])}}function F(e){var n=e.fatal,i=0;this.handler=function(e,a){var s,l;return -1===a&&0!==i?(i=0,o(n)):-1===a&&0===i?-1:0!==i?(l=i,s=null,i=0,(t(a,64,126)||t(a,128,252))&&(s=188*(l-(l<160?129:193))+a-(a<127?64:65)),t(s,8836,10715)?48508+s:(null===(l=null===s?null:m(s,w("jis0208")))&&r(a)&&e.prepend(a),null===l?o(n):l)):r(a)||128===a?a:t(a,161,223)?65216+a:t(a,129,159)||t(a,224,252)?(i=a,null):o(n)}}function O(e){e.fatal,this.handler=function(e,i){var r;return -1===i?-1:a(i)||128===i?i:165===i?92:8254===i?126:t(i,65377,65439)?i-65377+161:(r=i=8722===i?65293:i,null===(r=(h=h||w("jis0208").map(function(e,n){return t(n,8272,8835)?null:e})).indexOf(r))?l(i):[(i=n(r/188))+(i<31?129:193),(i=r%188)+(i<63?64:65)])}}function C(e){var n=e.fatal,i=0;this.handler=function(e,a){var s,l;return -1===a&&0!==i?(i=0,o(n)):-1===a&&0===i?-1:0!==i?(l=i,i=0,l=(s=null)===(s=t(a,65,254)?190*(l-129)+(a-65):s)?null:m(s,w("euc-kr")),null===s&&r(a)&&e.prepend(a),null===l?o(n):l):r(a)?a:t(a,129,254)?(i=a,null):o(n)}}function j(e){e.fatal,this.handler=function(e,t){var i;return -1===t?-1:a(t)?t:null===(i=g(t,w("euc-kr")))?l(t):[n(i/190)+129,i%190+65]}}function A(e,t){var n=e>>8,e=255&e;return t?[n,e]:[e,n]}function z(e,n){var i=n.fatal,r=null,a=null;this.handler=function(n,s){var l;return -1!==s||null===r&&null===a?-1===s&&null===r&&null===a?-1:null===r?(r=s,null):(s=e?(r<<8)+s:(s<<8)+r,(r=null)!==a?(l=a,a=null,t(s,56320,57343)?65536+1024*(l-55296)+(s-56320):(n.prepend(A(s,e)),o(i))):t(s,55296,56319)?(a=s,null):t(s,56320,57343)?o(i):s):o(i)}}function W(e,n){n.fatal,this.handler=function(n,i){var r;return -1===i?-1:t(i,0,65535)?A(i,e):(r=A(55296+(i-65536>>10),e),i=A(56320+(i-65536&1023),e),r.concat(i))}}function P(e){e.fatal,this.handler=function(e,t){return -1===t?-1:r(t)?t:63360+t-128}}function M(e){e.fatal,this.handler=function(e,n){return -1===n?-1:a(n)?n:t(n,63360,63487)?n-63360+128:l(n)}}Object.defineProperty&&(Object.defineProperty(y.prototype,"encoding",{get:function(){return this._encoding.name.toLowerCase()}}),Object.defineProperty(y.prototype,"fatal",{get:function(){return"fatal"===this._error_mode}}),Object.defineProperty(y.prototype,"ignoreBOM",{get:function(){return this._ignoreBOM}})),y.prototype.decode=function(e,t){e="object"==typeof e&&e instanceof ArrayBuffer?new Uint8Array(e):"object"==typeof e&&"buffer"in e&&e.buffer instanceof ArrayBuffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(0),t=i(t),this._do_not_flush||(this._decoder=_[this._encoding.name]({fatal:"fatal"===this._error_mode}),this._BOMseen=!1),this._do_not_flush=Boolean(t.stream);for(var n,r=new s(e),a=[];;){var o=r.read();if(-1===o||-1===(n=this._decoder.handler(r,o)))break;null!==n&&(Array.isArray(n)?a.push.apply(a,n):a.push(n))}if(!this._do_not_flush){for(;-1!==(n=this._decoder.handler(r,r.read()))&&(null!==n&&(Array.isArray(n)?a.push.apply(a,n):a.push(n)),!r.endOfStream()););this._decoder=null}return(function(e){t=["UTF-8","UTF-16LE","UTF-16BE"],n=this._encoding.name,-1===t.indexOf(n)||this._ignoreBOM||this._BOMseen||(0<e.length&&65279===e[0]?(this._BOMseen=!0,e.shift()):0<e.length&&(this._BOMseen=!0));for(var t,n,i=e,r="",a=0;a<i.length;++a){var s=i[a];s<=65535?r+=String.fromCharCode(s):(s-=65536,r+=String.fromCharCode(55296+(s>>10),56320+(1023&s)))}return r}).call(this,a)},Object.defineProperty&&Object.defineProperty(k.prototype,"encoding",{get:function(){return this._encoding.name.toLowerCase()}}),k.prototype.encode=function(e,t){e=void 0===e?"":String(e),t=i(t),this._do_not_flush||(this._encoder=p[this._encoding.name]({fatal:"fatal"===this._fatal})),this._do_not_flush=Boolean(t.stream);for(var n,r=new s(function(e){for(var t=String(e),n=t.length,i=0,r=[];i<n;){var a,s=t.charCodeAt(i);s<55296||57343<s?r.push(s):56320<=s&&s<=57343?r.push(65533):55296<=s&&s<=56319&&(i!==n-1&&56320<=(a=t.charCodeAt(i+1))&&a<=57343?(r.push(65536+((1023&s)<<10)+(1023&a)),i+=1):r.push(65533)),i+=1}return r}(e)),a=[];;){var o=r.read();if(-1===o||-1===(n=this._encoder.handler(r,o)))break;Array.isArray(n)?a.push.apply(a,n):a.push(n)}if(!this._do_not_flush){for(;-1!==(n=this._encoder.handler(r,r.read()));)Array.isArray(n)?a.push.apply(a,n):a.push(n);this._encoder=null}return new Uint8Array(a)},p["UTF-8"]=function(e){return new B(e)},_["UTF-8"]=function(e){return new v(e)},"encoding-indexes"in e&&c.forEach(function(e){"Legacy single-byte encodings"===e.heading&&e.encodings.forEach(function(e){var e=e.name,t=w(e.toLowerCase());_[e]=function(e){return new N(t,e)},p[e]=function(e){return new T(t,e)}})}),_.GBK=function(e){return new x(e)},p.GBK=function(e){return new R(e,!0)},p.gb18030=function(e){return new R(e)},_.gb18030=function(e){return new x(e)},p.Big5=function(e){return new E(e)},_.Big5=function(e){return new I(e)},p["EUC-JP"]=function(e){return new S(e)},_["EUC-JP"]=function(e){return new U(e)},p["ISO-2022-JP"]=function(e){return new L(e)},_["ISO-2022-JP"]=function(e){return new D(e)},p.Shift_JIS=function(e){return new O(e)},_.Shift_JIS=function(e){return new F(e)},p["EUC-KR"]=function(e){return new j(e)},_["EUC-KR"]=function(e){return new C(e)},p["UTF-16BE"]=function(e){return new W(!0,e)},_["UTF-16BE"]=function(e){return new z(!0,e)},p["UTF-16LE"]=function(e){return new W(!1,e)},_["UTF-16LE"]=function(e){return new z(!1,e)},p["x-user-defined"]=function(e){return new M(e)},_["x-user-defined"]=function(e){return new P(e)},e.TextEncoder||(e.TextEncoder=k),e.TextDecoder||(e.TextDecoder=y),"undefined"!=typeof module&&module.exports&&(module.exports={TextEncoder:e.TextEncoder,TextDecoder:e.TextDecoder,EncodingIndexes:e["encoding-indexes"]})})(this||{}),(e=>{e.symbol=Symbol.for("protobuf-ts/unknown"),e.onRead=(n,i,r,a,s)=>{(t(i)?i[e.symbol]:i[e.symbol]=[]).push({no:r,wireType:a,data:s})},e.onWrite=(t,n,i)=>{for(var{no:r,wireType:a,data:s}of e.list(n))i.tag(r,a).raw(s)},e.list=(n,i)=>t(n)?(n=n[e.symbol],i?n.filter(e=>e.no==i):n):[],e.last=(t,n)=>(0,e.list)(t,n).slice(-1)[0];let t=t=>t&&Array.isArray(t[e.symbol])})(d=d||{});var o,l,d,h=((o=h||{})[o.Varint=0]="Varint",o[o.Bit64=1]="Bit64",o[o.LengthDelimited=2]="LengthDelimited",o[o.StartGroup=3]="StartGroup",o[o.EndGroup=4]="EndGroup",o[o.Bit32=5]="Bit32",o);let u=Symbol.for("protobuf-ts/message-type");function c(e){let t=!1;var n=[];for(let i=0;i<e.length;i++){var r=e.charAt(i);"_"==r?t=!0:/\d/.test(r)?(n.push(r),t=!0):t?(n.push(r.toUpperCase()),t=!1):0==i?n.push(r.toLowerCase()):n.push(r)}return n.join("")}var f,p,_,m=((f=m||{})[f.DOUBLE=1]="DOUBLE",f[f.FLOAT=2]="FLOAT",f[f.INT64=3]="INT64",f[f.UINT64=4]="UINT64",f[f.INT32=5]="INT32",f[f.FIXED64=6]="FIXED64",f[f.FIXED32=7]="FIXED32",f[f.BOOL=8]="BOOL",f[f.STRING=9]="STRING",f[f.BYTES=12]="BYTES",f[f.UINT32=13]="UINT32",f[f.SFIXED32=15]="SFIXED32",f[f.SFIXED64=16]="SFIXED64",f[f.SINT32=17]="SINT32",f[f.SINT64=18]="SINT64",f),g=((p=g||{})[p.BIGINT=0]="BIGINT",p[p.STRING=1]="STRING",p[p.NUMBER=2]="NUMBER",p),w=((_=w||{})[_.NO=0]="NO",_[_.PACKED=1]="PACKED",_[_.UNPACKED=2]="UNPACKED",_);function b(e){return e.localName=e.localName??c(e.name),e.jsonName=e.jsonName??c(e.name),e.repeat=e.repeat??0,e.opt=e.opt??(!e.repeat&&!e.oneof&&"message"==e.kind),e}function y(e){if("object"!=typeof e||null===e||!e.hasOwnProperty("oneofKind"))return!1;switch(typeof e.oneofKind){case"string":return void 0!==e[e.oneofKind]&&2==Object.keys(e).length;case"undefined":return 1==Object.keys(e).length;default:return!1}}class k{constructor(e){this.fields=e.fields??[]}prepare(){if(!this.data){var e,t=[],n=[],i=[];for(e of this.fields)if(e.oneof)i.includes(e.oneof)||(i.push(e.oneof),t.push(e.oneof),n.push(e.oneof));else switch(n.push(e.localName),e.kind){case"scalar":case"enum":e.opt&&!e.repeat||t.push(e.localName);break;case"message":e.repeat&&t.push(e.localName);break;case"map":t.push(e.localName)}this.data={req:t,known:n,oneofs:Object.values(i)}}}is(e,t,n=!1){if(!(t<0)){if(null==e||"object"!=typeof e)return!1;this.prepare();let i=Object.keys(e),r=this.data;if(i.length<r.req.length||r.req.some(e=>!i.includes(e))||!n&&i.some(e=>!r.known.includes(e)))return!1;if(!(t<1)){for(let a of r.oneofs){let s=e[a];if(!y(s))return!1;if(void 0!==s.oneofKind){var o=this.fields.find(e=>e.localName===s.oneofKind);if(!o||!this.field(s[s.oneofKind],o,n,t))return!1}}for(let l of this.fields)if(void 0===l.oneof&&!this.field(e[l.localName],l,n,t))return!1}}return!0}field(e,t,n,i){var r=t.repeat;switch(t.kind){case"scalar":return void 0===e?t.opt:r?this.scalars(e,t.T,i,t.L):this.scalar(e,t.T,t.L);case"enum":return void 0===e?t.opt:r?this.scalars(e,m.INT32,i):this.scalar(e,m.INT32);case"message":return void 0===e||(r?this.messages(e,t.T(),n,i):this.message(e,t.T(),n,i));case"map":if("object"!=typeof e||null===e)return!1;if(i<2)break;if(!this.mapKeys(e,t.K,i))return!1;switch(t.V.kind){case"scalar":return this.scalars(Object.values(e),t.V.T,i,t.V.L);case"enum":return this.scalars(Object.values(e),m.INT32,i);case"message":return this.messages(Object.values(e),t.V.T(),n,i)}}return!0}message(e,t,n,i){return n?t.isAssignable(e,i):t.is(e,i)}messages(e,t,n,i){if(!Array.isArray(e))return!1;if(!(i<2)){if(n){for(let r=0;r<e.length&&r<i;r++)if(!t.isAssignable(e[r],i-1))return!1}else for(let a=0;a<e.length&&a<i;a++)if(!t.is(e[a],i-1))return!1}return!0}scalar(e,t,n){var i=typeof e;switch(t){case m.UINT64:case m.FIXED64:case m.INT64:case m.SFIXED64:case m.SINT64:switch(n){case g.BIGINT:return"bigint"==i;case g.NUMBER:return"number"==i&&!isNaN(e);default:return"string"==i}case m.BOOL:return"boolean"==i;case m.STRING:return"string"==i;case m.BYTES:return e instanceof Uint8Array;case m.DOUBLE:case m.FLOAT:return"number"==i&&!isNaN(e);default:return"number"==i&&Number.isInteger(e)}}scalars(e,t,n,i){if(!Array.isArray(e))return!1;if(!(n<2)&&Array.isArray(e)){for(let r=0;r<e.length&&r<n;r++)if(!this.scalar(e[r],t,i))return!1}return!0}mapKeys(e,t,n){var i=Object.keys(e);switch(t){case m.INT32:case m.FIXED32:case m.SFIXED32:case m.SINT32:case m.UINT32:return this.scalars(i.slice(0,n).map(e=>parseInt(e)),t,n);case m.BOOL:return this.scalars(i.slice(0,n).map(e=>"true"==e||"false"!=e&&e),t,n);default:return this.scalars(i,t,n,g.STRING)}}}function v(e){var t=typeof e;if("object"==t){if(Array.isArray(e))return"array";if(null===e)return"null"}return t}function B(e){return null!==e&&"object"==typeof e&&!Array.isArray(e)}let N="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),T=[];for(let x=0;x<N.length;x++)T[N[x].charCodeAt(0)]=x;function R(e){let t=3*e.length/4,n=("="==e[e.length-2]?t-=2:"="==e[e.length-1]&&--t,new Uint8Array(t)),i=0,r=0,a,s=0;for(let o=0;o<e.length;o++){if(void 0===(a=T[e.charCodeAt(o)]))switch(e[o]){case"=":r=0;case"\n":case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string.")}switch(r){case 0:s=a,r=1;break;case 1:n[i++]=s<<2|(48&a)>>4,s=a,r=2;break;case 2:n[i++]=(15&s)<<4|(60&a)>>2,s=a,r=3;break;case 3:n[i++]=(3&s)<<6|a,r=0}}if(1==r)throw Error("invalid base64 string.");return n.subarray(0,i)}function I(e){let t="",n=0,i,r=0;for(let a=0;a<e.length;a++)switch(i=e[a],n){case 0:t+=N[i>>2],r=(3&i)<<4,n=1;break;case 1:t+=N[r|i>>4],r=(15&i)<<2,n=2;break;case 2:t=(t+=N[r|i>>6])+N[63&i],n=0}return n&&(t=t+N[r]+"=",1==n&&(t+="=")),t}function E(){let e=0,t=0;for(let n=0;n<28;n+=7){var i=this.buf[this.pos++];if(e|=(127&i)<<n,0==(128&i))return this.assertBounds(),[e,t]}var r=this.buf[this.pos++];if(e|=(15&r)<<28,t=(112&r)>>4,0==(128&r))return this.assertBounds(),[e,t];for(let a=3;a<=31;a+=7){var s=this.buf[this.pos++];if(t|=(127&s)<<a,0==(128&s))return this.assertBounds(),[e,t]}throw Error("invalid varint")}function U(e,t,n){for(let i=0;i<28;i+=7){var r=e>>>i,a=!(r>>>7==0&&0==t);if(n.push(255&(a?128|r:r)),!a)return}var s=e>>>28&15|(7&t)<<4,o=t>>3!=0;if(n.push(255&(o?128|s:s)),o){for(let l=3;l<31;l+=7){var d=t>>>l,h=d>>>7!=0;if(n.push(255&(h?128|d:d)),!h)return}n.push(t>>>31&1)}}T["-".charCodeAt(0)]=N.indexOf("+"),T["_".charCodeAt(0)]=N.indexOf("/");function S(e){var t="-"==e[0];t&&(e=e.slice(1));let n=0,i=0;function r(t,r){i*=1e6,(n=1e6*n+(t=Number(e.slice(t,r))))>=4294967296&&(i+=n/4294967296|0,n%=4294967296)}return r(-24,-18),r(-18,-12),r(-12,-6),r(-6),[t,n,i]}function D(e,t){if(t<=2097151)return""+(4294967296*t+(e>>>0));var n=(e>>>24|t<<8)>>>0&16777215,t=t>>16&65535;let i=(16777215&e)+6777216*n+6710656*t,r=n+8147497*t,a=2*t;function s(e,t){return e=e?String(e):"",t?"0000000".slice(e.length)+e:e}return 1e7<=i&&(r+=Math.floor(i/1e7),i%=1e7),1e7<=r&&(a+=Math.floor(r/1e7),r%=1e7),s(a,0)+s(r,a)+s(i,1)}function L(e,t){if(0<=e){for(;127<e;)t.push(127&e|128),e>>>=7;t.push(e)}else{for(let n=0;n<9;n++)t.push(127&e|128),e>>=7;t.push(1)}}function F(){let e=this.buf[this.pos++];var t=127&e;if(0==(128&e)||(t|=(127&(e=this.buf[this.pos++]))<<7,0==(128&e))||(t|=(127&(e=this.buf[this.pos++]))<<14,0==(128&e))||(t|=(127&(e=this.buf[this.pos++]))<<21,0==(128&e)))return this.assertBounds(),t;t|=(15&(e=this.buf[this.pos++]))<<28;for(let n=5;0!=(128&e)&&n<10;n++)e=this.buf[this.pos++];if(0!=(128&e))throw Error("invalid varint");return this.assertBounds(),t>>>0}function O(){var e=new DataView(new ArrayBuffer(8));return void 0!==globalThis.BigInt&&"function"==typeof e.getBigInt64&&"function"==typeof e.getBigUint64&&"function"==typeof e.setBigInt64&&"function"==typeof e.setBigUint64?{MIN:BigInt("-9223372036854775808"),MAX:BigInt("9223372036854775807"),UMIN:BigInt("0"),UMAX:BigInt("18446744073709551615"),C:BigInt,V:e}:void 0}let C=O();function j(e){if(!e)throw Error("BigInt unavailable, see https://github.com/timostamm/protobuf-ts/blob/v1.0.8/MANUAL.md#bigint-support")}let A=/^-?[0-9]+$/;class z{constructor(e,t){this.lo=0|e,this.hi=0|t}isZero(){return 0==this.lo&&0==this.hi}toNumber(){var e=4294967296*this.hi+(this.lo>>>0);if(Number.isSafeInteger(e))return e;throw Error("cannot convert to safe number")}}let W=class extends z{static from(e){if(C)switch(typeof e){case"string":if("0"==e)return this.ZERO;if(""==e)throw Error("string is no integer");e=C.C(e);case"number":if(0===e)return this.ZERO;e=C.C(e);case"bigint":if(!e)return this.ZERO;if(e<C.UMIN)throw Error("signed value for ulong");if(e>C.UMAX)throw Error("ulong too large");return C.V.setBigUint64(0,e,!0),new W(C.V.getInt32(0,!0),C.V.getInt32(4,!0))}else switch(typeof e){case"string":if("0"==e)return this.ZERO;if(e=e.trim(),!A.test(e))throw Error("string is no integer");var[t,n,i]=S(e);if(t)throw Error("signed value");return new W(n,i);case"number":if(0==e)return this.ZERO;if(!Number.isSafeInteger(e))throw Error("number is no integer");if(e<0)throw Error("signed value for ulong");return new W(e,e/4294967296)}throw Error("unknown value "+typeof e)}toString(){return C?this.toBigInt().toString():D(this.lo,this.hi)}toBigInt(){return j(C),C.V.setInt32(0,this.lo,!0),C.V.setInt32(4,this.hi,!0),C.V.getBigUint64(0,!0)}},P=W;P.ZERO=new W(0,0);let M=class extends z{static from(e){if(C)switch(typeof e){case"string":if("0"==e)return this.ZERO;if(""==e)throw Error("string is no integer");e=C.C(e);case"number":if(0===e)return this.ZERO;e=C.C(e);case"bigint":if(!e)return this.ZERO;if(e<C.MIN)throw Error("ulong too small");if(e>C.MAX)throw Error("ulong too large");return C.V.setBigInt64(0,e,!0),new M(C.V.getInt32(0,!0),C.V.getInt32(4,!0))}else switch(typeof e){case"string":var t,n,i;if("0"==e)return this.ZERO;if(e=e.trim(),A.test(e))return[t,i,n]=S(e),i=new M(i,n),t?i.negate():i;throw Error("string is no integer");case"number":if(0==e)return this.ZERO;if(Number.isSafeInteger(e))return 0<e?new M(e,e/4294967296):new M(-e,-e/4294967296).negate();throw Error("number is no integer")}throw Error("unknown value "+typeof e)}isNegative(){return 0!=(2147483648&this.hi)}negate(){let e=~this.hi,t=this.lo;return t?t=1+~t:e+=1,new M(t,e)}toString(){var e;return C?this.toBigInt().toString():this.isNegative()?"-"+D((e=this.negate()).lo,e.hi):D(this.lo,this.hi)}toBigInt(){return j(C),C.V.setInt32(0,this.lo,!0),C.V.setInt32(4,this.hi,!0),C.V.getBigInt64(0,!0)}},V=M;function Z(e,t){if(!e)throw Error(t)}V.ZERO=new M(0,0);function K(e){if("number"!=typeof e)throw Error("invalid int 32: "+typeof e);if(!Number.isInteger(e)||e>2147483647||e<-2147483648)throw Error("invalid int 32: "+e)}function X(e){if("number"!=typeof e)throw Error("invalid uint 32: "+typeof e);if(!Number.isInteger(e)||e>4294967295||e<0)throw Error("invalid uint 32: "+e)}function H(e){if("number"!=typeof e)throw Error("invalid float 32: "+typeof e);if(Number.isFinite(e)&&(e>34028234663852886e22||e<-34028234663852886e22))throw Error("invalid float 32: "+e)}function J(e,t){switch(t){case g.BIGINT:return e.toBigInt();case g.NUMBER:return e.toNumber();default:return e.toString()}}class G{constructor(e){this.info=e}prepare(){if(void 0===this.fMap)for(let e of(this.fMap={},this.info.fields??[]))this.fMap[e.name]=e,this.fMap[e.jsonName]=e,this.fMap[e.localName]=e}assert(e,t,n){if(!e){let i=v(n);throw"number"!=i&&"boolean"!=i||(i=n.toString()),Error(`Cannot parse JSON ${i} for ${this.info.typeName}#`+t)}}read(e,t,n){this.prepare();var i,r,a=[];for([i,r]of Object.entries(e)){var s=this.fMap[i];if(!s){if(n.ignoreUnknownFields)continue;throw Error(`Found unknown field while reading ${this.info.typeName} from JSON format. JSON key: `+i)}var o=s.localName;let l;if(s.oneof){if(a.includes(s.oneof))throw Error(`Multiple members of the oneof group "${s.oneof}" of ${this.info.typeName} are present in JSON.`);a.push(s.oneof),l=t[s.oneof]={oneofKind:o}}else l=t;if("map"==s.kind){if(null!==r){this.assert(B(r),s.name,r);var d,h,u=l[o];for([d,h]of Object.entries(r)){this.assert(null!==h,s.name+" map value",null);let c;switch(s.V.kind){case"message":c=s.V.T().internalJsonRead(h,n);break;case"enum":if(!1===(c=this.enum(s.V.T(),h,s.name,n.ignoreUnknownFields)))continue;break;case"scalar":c=this.scalar(h,s.V.T,s.V.L,s.name)}this.assert(void 0!==c,s.name+" map value",h);let f=d;s.K==m.BOOL&&(f="true"==f||"false"!=f&&f),u[f=this.scalar(f,s.K,g.STRING,s.name).toString()]=c}}}else if(s.repeat){if(null!==r){this.assert(Array.isArray(r),s.name,r);var p=l[o];for(let _ of r){this.assert(null!==_,s.name,null);let w;switch(s.kind){case"message":w=s.T().internalJsonRead(_,n);break;case"enum":if(!1===(w=this.enum(s.T(),_,s.name,n.ignoreUnknownFields)))continue;break;case"scalar":w=this.scalar(_,s.T,s.L,s.name)}this.assert(void 0!==w,s.name,r),p.push(w)}}}else switch(s.kind){case"message":null===r&&"google.protobuf.Value"!=s.T().typeName?this.assert(void 0===s.oneof,s.name+" (oneof member)",null):l[o]=s.T().internalJsonRead(r,n,l[o]);break;case"enum":var b=this.enum(s.T(),r,s.name,n.ignoreUnknownFields);!1!==b&&(l[o]=b);break;case"scalar":l[o]=this.scalar(r,s.T,s.L,s.name)}}}enum(e,t,n,i){if("google.protobuf.NullValue"==e[0]&&Z(null===t,`Unable to parse field ${this.info.typeName}#${n}, enum ${e[0]} only accepts null.`),null===t)return 0;switch(typeof t){case"number":return Z(Number.isInteger(t),`Unable to parse field ${this.info.typeName}#${n}, enum can only be integral number, got ${t}.`),t;case"string":let r=t;e[2]&&t.substring(0,e[2].length)===e[2]&&(r=t.substring(e[2].length));var a=e[1][r];return(void 0!==a||!i)&&(Z("number"==typeof a,`Unable to parse field ${this.info.typeName}#${n}, enum ${e[0]} has no value for "${t}".`),a)}Z(!1,`Unable to parse field ${this.info.typeName}#${n}, cannot parse enum value from ${typeof t}".`)}scalar(e,t,n,i){let r;try{switch(t){case m.DOUBLE:case m.FLOAT:if(null===e)return 0;if("NaN"===e)return Number.NaN;if("Infinity"===e)return Number.POSITIVE_INFINITY;if("-Infinity"===e)return Number.NEGATIVE_INFINITY;if(""===e)r="empty string";else if("string"==typeof e&&e.trim().length!==e.length)r="extra whitespace";else if("string"==typeof e||"number"==typeof e){var a=Number(e);if(Number.isNaN(a))r="not a number";else{if(Number.isFinite(a))return t==m.FLOAT&&H(a),a;r="too large or small"}}break;case m.INT32:case m.FIXED32:case m.SFIXED32:case m.SINT32:case m.UINT32:if(null===e)return 0;let s;if("number"==typeof e?s=e:""===e?r="empty string":"string"==typeof e&&(e.trim().length!==e.length?r="extra whitespace":s=Number(e)),void 0===s)break;return(t==m.UINT32?X:K)(s),s;case m.INT64:case m.SFIXED64:case m.SINT64:if(null===e)return J(V.ZERO,n);if("number"!=typeof e&&"string"!=typeof e)break;return J(V.from(e),n);case m.FIXED64:case m.UINT64:if(null===e)return J(P.ZERO,n);if("number"!=typeof e&&"string"!=typeof e)break;return J(P.from(e),n);case m.BOOL:if(null===e)return!1;if("boolean"!=typeof e)break;return e;case m.STRING:if(null===e)return"";if("string"!=typeof e){r="extra whitespace";break}try{encodeURIComponent(e)}catch(o){break}return e;case m.BYTES:if(null===e||""===e)return new Uint8Array(0);if("string"!=typeof e)break;return R(e)}}catch(l){r=l.message}this.assert(!1,i+(r?" - "+r:""),e)}}class Y{constructor(e){this.fields=e.fields??[]}write(e,t){var n,i,r={},a=e;for(let s of this.fields)s.oneof?(n=a[s.oneof]).oneofKind===s.localName&&(i="scalar"==s.kind||"enum"==s.kind?{...t,emitDefaultValues:!0}:t,Z(void 0!==(n=this.field(s,n[s.localName],i))),r[t.useProtoFieldName?s.name:s.jsonName]=n):void 0!==(i=this.field(s,a[s.localName],t))&&(r[t.useProtoFieldName?s.name:s.jsonName]=i);return r}field(e,t,n){let i;if("map"==e.kind){Z("object"==typeof t&&null!==t);var r={};switch(e.V.kind){case"scalar":for(var[a,s]of Object.entries(t))Z(void 0!==(s=this.scalar(e.V.T,s,e.name,!1,!0))),r[a.toString()]=s;break;case"message":var o,l,d=e.V.T();for([o,l]of Object.entries(t)){var h=this.message(d,l,e.name,n);Z(void 0!==h),r[o.toString()]=h}break;case"enum":var u,c,f=e.V.T();for([u,c]of Object.entries(t)){Z(void 0===c||"number"==typeof c);var p=this.enum(f,c,e.name,!1,!0,n.enumAsInteger);Z(void 0!==p),r[u.toString()]=p}}(n.emitDefaultValues||0<Object.keys(r).length)&&(i=r)}else if(e.repeat){Z(Array.isArray(t));var _=[];switch(e.kind){case"scalar":for(let m=0;m<t.length;m++){var g=this.scalar(e.T,t[m],e.name,e.opt,!0);Z(void 0!==g),_.push(g)}break;case"enum":var w=e.T();for(let b=0;b<t.length;b++){Z(void 0===t[b]||"number"==typeof t[b]);var y=this.enum(w,t[b],e.name,e.opt,!0,n.enumAsInteger);Z(void 0!==y),_.push(y)}break;case"message":var k=e.T();for(let v=0;v<t.length;v++){var B=this.message(k,t[v],e.name,n);Z(void 0!==B),_.push(B)}}(n.emitDefaultValues||0<_.length||n.emitDefaultValues)&&(i=_)}else switch(e.kind){case"scalar":i=this.scalar(e.T,t,e.name,e.opt,n.emitDefaultValues);break;case"enum":i=this.enum(e.T(),t,e.name,e.opt,n.emitDefaultValues,n.enumAsInteger);break;case"message":i=this.message(e.T(),t,e.name,n)}return i}enum(e,t,n,i,r,a){if("google.protobuf.NullValue"==e[0])return null;if(void 0===t)Z(i);else if(0!==t||r||i)return Z("number"==typeof t),Z(Number.isInteger(t)),a||!e[1].hasOwnProperty(t)?t:e[2]?e[2]+e[1][t]:e[1][t]}message(e,t,n,i){return void 0===t?i.emitDefaultValues?null:void 0:e.internalJsonWrite(t,i)}scalar(e,t,n,i,r){if(void 0===t)Z(i);else{var a=r||i;switch(e){case m.INT32:case m.SFIXED32:case m.SINT32:return 0===t?a?0:void 0:(K(t),t);case m.FIXED32:case m.UINT32:return 0===t?a?0:void 0:(X(t),t);case m.FLOAT:H(t);case m.DOUBLE:return 0===t?a?0:void 0:(Z("number"==typeof t),Number.isNaN(t)?"NaN":t===Number.POSITIVE_INFINITY?"Infinity":t===Number.NEGATIVE_INFINITY?"-Infinity":t);case m.STRING:return""===t?a?"":void 0:(Z("string"==typeof t),t);case m.BOOL:return!1===t?!a&&void 0:(Z("boolean"==typeof t),t);case m.UINT64:case m.FIXED64:Z("number"==typeof t||"string"==typeof t||"bigint"==typeof t);var s=P.from(t);return s.isZero()&&!a?void 0:s.toString();case m.INT64:case m.SFIXED64:case m.SINT64:return Z("number"==typeof t||"string"==typeof t||"bigint"==typeof t),(s=V.from(t)).isZero()&&!a?void 0:s.toString();case m.BYTES:return(Z(t instanceof Uint8Array),t.byteLength)?I(t):a?"":void 0}}}}function q(e,t=g.STRING){switch(e){case m.BOOL:return!1;case m.UINT64:case m.FIXED64:return J(P.ZERO,t);case m.INT64:case m.SFIXED64:case m.SINT64:return J(V.ZERO,t);case m.DOUBLE:case m.FLOAT:return 0;case m.BYTES:return new Uint8Array(0);case m.STRING:return"";default:return 0}}class Q{constructor(e){this.info=e}prepare(){var e;this.fieldNoToField||(e=this.info.fields??[],this.fieldNoToField=new Map(e.map(e=>[e.no,e])))}read(e,t,n,i){this.prepare();for(var r=void 0===i?e.len:e.pos+i;e.pos<r;){var[a,s]=e.tag(),o=this.fieldNoToField.get(a);if(o){let l=t,u=o.repeat,c=o.localName;switch(o.oneof&&(l=l[o.oneof]).oneofKind!==c&&(l=t[o.oneof]={oneofKind:c}),o.kind){case"scalar":case"enum":var f="enum"==o.kind?m.INT32:o.T,p="scalar"==o.kind?o.L:void 0;if(u){var _=l[c];if(s==h.LengthDelimited&&f!=m.STRING&&f!=m.BYTES)for(var g=e.uint32()+e.pos;e.pos<g;)_.push(this.scalar(e,f,p));else _.push(this.scalar(e,f,p))}else l[c]=this.scalar(e,f,p);break;case"message":u?(w=l[c],b=o.T().internalBinaryRead(e,e.uint32(),n),w.push(b)):l[c]=o.T().internalBinaryRead(e,e.uint32(),n,l[c]);break;case"map":var[w,b]=this.mapEntry(o,e,n);l[c][w]=b}}else{var y=n.readUnknownField;if("throw"==y)throw Error(`Unknown field ${a} (wire type ${s}) for `+this.info.typeName);var k=e.skip(s);!1!==y&&(!0===y?d.onRead:y)(this.info.typeName,t,a,s,k)}}}mapEntry(e,t,n){var i=t.uint32(),r=t.pos+i;let a,s;for(;t.pos<r;){var[o,l]=t.tag();switch(o){case 1:a=e.K==m.BOOL?t.bool().toString():this.scalar(t,e.K,g.STRING);break;case 2:switch(e.V.kind){case"scalar":s=this.scalar(t,e.V.T,e.V.L);break;case"enum":s=t.int32();break;case"message":s=e.V.T().internalBinaryRead(t,t.uint32(),n)}break;default:throw Error(`Unknown field ${o} (wire type ${l}) in map entry for ${this.info.typeName}#`+e.name)}}if(void 0===a&&(i=q(e.K),a=e.K==m.BOOL?i.toString():i),void 0===s)switch(e.V.kind){case"scalar":s=q(e.V.T,e.V.L);break;case"enum":s=0;break;case"message":s=e.V.T().create()}return[a,s]}scalar(e,t,n){switch(t){case m.INT32:return e.int32();case m.STRING:return e.string();case m.BOOL:return e.bool();case m.DOUBLE:return e.double();case m.FLOAT:return e.float();case m.INT64:return J(e.int64(),n);case m.UINT64:return J(e.uint64(),n);case m.FIXED64:return J(e.fixed64(),n);case m.FIXED32:return e.fixed32();case m.BYTES:return e.bytes();case m.UINT32:return e.uint32();case m.SFIXED32:return e.sfixed32();case m.SFIXED64:return J(e.sfixed64(),n);case m.SINT32:return e.sint32();case m.SINT64:return J(e.sint64(),n)}}}class ee{constructor(e){this.info=e}prepare(){var e;this.fields||(e=this.info.fields?this.info.fields.concat():[],this.fields=e.sort((e,t)=>e.no-t.no))}write(e,t,n){for(let i of(this.prepare(),this.fields)){let r,a,s=i.repeat,o=i.localName;if(i.oneof){var l=e[i.oneof];if(l.oneofKind!==o)continue;r=l[o],a=!0}else r=e[o],a=!1;switch(i.kind){case"scalar":case"enum":var h="enum"==i.kind?m.INT32:i.T;if(s){if(Z(Array.isArray(r)),s==w.PACKED)this.packed(t,h,i.no,r);else for(let u of r)this.scalar(t,h,i.no,u,!0)}else void 0===r?Z(i.opt):this.scalar(t,h,i.no,r,a||i.opt);break;case"message":if(s)for(let c of(Z(Array.isArray(r)),r))this.message(t,n,i.T(),i.no,c);else this.message(t,n,i.T(),i.no,r);break;case"map":for(var[f,p]of(Z("object"==typeof r&&null!==r),Object.entries(r)))this.mapEntry(t,n,i,f,p)}}var _=n.writeUnknownFields;!1!==_&&(!0===_?d.onWrite:_)(this.info.typeName,e,t)}mapEntry(e,t,n,i,r){e.tag(n.no,h.LengthDelimited),e.fork();let a=i;switch(n.K){case m.INT32:case m.FIXED32:case m.UINT32:case m.SFIXED32:case m.SINT32:a=Number.parseInt(i);break;case m.BOOL:Z("true"==i||"false"==i),a="true"==i}switch(this.scalar(e,n.K,1,a,!0),n.V.kind){case"scalar":this.scalar(e,n.V.T,2,r,!0);break;case"enum":this.scalar(e,m.INT32,2,r,!0);break;case"message":this.message(e,t,n.V.T(),2,r)}e.join()}message(e,t,n,i,r){void 0!==r&&(n.internalBinaryWrite(r,e.tag(i,h.LengthDelimited).fork(),t),e.join())}scalar(e,t,n,i,r){var[t,a,s]=this.scalarInfo(t,i);s&&!r||(e.tag(n,t),e[a](i))}packed(e,t,n,i){if(i.length){Z(t!==m.BYTES&&t!==m.STRING),e.tag(n,h.LengthDelimited),e.fork();var[,r]=this.scalarInfo(t);for(let a=0;a<i.length;a++)e[r](i[a]);e.join()}}scalarInfo(e,t){let n=h.Varint,i;var r=void 0===t;let a=0===t;switch(e){case m.INT32:i="int32";break;case m.STRING:a=r||!t.length,n=h.LengthDelimited,i="string";break;case m.BOOL:a=!1===t,i="bool";break;case m.UINT32:i="uint32";break;case m.DOUBLE:n=h.Bit64,i="double";break;case m.FLOAT:n=h.Bit32,i="float";break;case m.INT64:a=r||V.from(t).isZero(),i="int64";break;case m.UINT64:a=r||P.from(t).isZero(),i="uint64";break;case m.FIXED64:a=r||P.from(t).isZero(),n=h.Bit64,i="fixed64";break;case m.BYTES:a=r||!t.byteLength,n=h.LengthDelimited,i="bytes";break;case m.FIXED32:n=h.Bit32,i="fixed32";break;case m.SFIXED32:n=h.Bit32,i="sfixed32";break;case m.SFIXED64:a=r||V.from(t).isZero(),n=h.Bit64,i="sfixed64";break;case m.SINT32:i="sint32";break;case m.SINT64:a=r||V.from(t).isZero(),i="sint64"}return[n,i,r||a]}}function et(e){var t,n={};for(t of(Object.defineProperty(n,u,{enumerable:!1,value:e}),e.fields)){var i=t.localName;if(!t.opt){if(t.oneof)n[t.oneof]={oneofKind:void 0};else if(t.repeat)n[i]=[];else switch(t.kind){case"scalar":n[i]=q(t.T,t.L);break;case"enum":n[i]=0;break;case"map":n[i]={}}}}return n}function en(e,t,n){let i,r=n,a;for(var s of e.fields){var o=s.localName;if(s.oneof){var l=r[s.oneof];if(null==(null==l?void 0:l.oneofKind))continue;if(i=l[o],(a=t[s.oneof]).oneofKind=l.oneofKind,null==i){delete a[o];continue}}else if(i=r[o],a=t,null==i)continue;switch(s.repeat&&(a[o].length=i.length),s.kind){case"scalar":case"enum":if(s.repeat)for(let d=0;d<i.length;d++)a[o][d]=i[d];else a[o]=i;break;case"message":var h=s.T();if(s.repeat)for(let u=0;u<i.length;u++)a[o][u]=h.create(i[u]);else void 0===a[o]?a[o]=h.create(i):h.mergePartial(a[o],i);break;case"map":switch(s.V.kind){case"scalar":case"enum":Object.assign(a[o],i);break;case"message":var c,f=s.V.T();for(c of Object.keys(i))a[o][c]=f.create(i[c])}}}}let ei={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0},er={ignoreUnknownFields:!1};function ea(e){return e?{...er,...e}:er}function es(e){return e?{...ei,...e}:ei}function eo(e,t,n){if(t!==n){if(!t||!n)return!1;for(var i of e.fields){var r=i.localName,a=(i.oneof?t[i.oneof]:t)[r],s=(i.oneof?n[i.oneof]:n)[r];switch(i.kind){case"enum":case"scalar":var o="enum"==i.kind?m.INT32:i.T;if((i.repeat?eh:ed)(o,a,s))break;return!1;case"map":if("message"==i.V.kind?eu(i.V.T(),el(a),el(s)):eh("enum"==i.V.kind?m.INT32:i.V.T,el(a),el(s)))break;return!1;case"message":if(o=i.T(),i.repeat?eu(o,a,s):o.equals(a,s))break;return!1}}}return!0}let el=Object.values;function ed(e,t,n){if(t!==n){if(e!==m.BYTES)return!1;var i=t,r=n;if(i.length!==r.length)return!1;for(let a=0;a<i.length;a++)if(i[a]!=r[a])return!1}return!0}function eh(e,t,n){if(t.length!==n.length)return!1;for(let i=0;i<t.length;i++)if(!ed(e,t[i],n[i]))return!1;return!0}function eu(e,t,n){if(t.length!==n.length)return!1;for(let i=0;i<t.length;i++)if(!e.equals(t[i],n[i]))return!1;return!0}let ec={writeUnknownFields:!0,writerFactory:()=>new ep};function ef(e){return e?{...ec,...e}:ec}class ep{constructor(e){this.stack=[],this.textEncoder=e??new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let e=0;for(let t=0;t<this.chunks.length;t++)e+=this.chunks[t].length;var n=new Uint8Array(e);let i=0;for(let r=0;r<this.chunks.length;r++)n.set(this.chunks[r],i),i+=this.chunks[r].length;return this.chunks=[],n}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){var e=this.finish(),t=this.stack.pop();if(t)return this.chunks=t.chunks,this.buf=t.buf,this.uint32(e.byteLength),this.raw(e);throw Error("invalid state, fork stack empty")}tag(e,t){return this.uint32((e<<3|t)>>>0)}raw(e){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(e),this}uint32(e){for(X(e);127<e;)this.buf.push(127&e|128),e>>>=7;return this.buf.push(e),this}int32(e){return K(e),L(e,this.buf),this}bool(e){return this.buf.push(e?1:0),this}bytes(e){return this.uint32(e.byteLength),this.raw(e)}string(e){return e=this.textEncoder.encode(e),this.uint32(e.byteLength),this.raw(e)}float(e){H(e);var t=new Uint8Array(4);return new DataView(t.buffer).setFloat32(0,e,!0),this.raw(t)}double(e){var t=new Uint8Array(8);return new DataView(t.buffer).setFloat64(0,e,!0),this.raw(t)}fixed32(e){X(e);var t=new Uint8Array(4);return new DataView(t.buffer).setUint32(0,e,!0),this.raw(t)}sfixed32(e){K(e);var t=new Uint8Array(4);return new DataView(t.buffer).setInt32(0,e,!0),this.raw(t)}sint32(e){return K(e),L(e=(e<<1^e>>31)>>>0,this.buf),this}sfixed64(e){var t=new Uint8Array(8),n=new DataView(t.buffer),e=V.from(e);return n.setInt32(0,e.lo,!0),n.setInt32(4,e.hi,!0),this.raw(t)}fixed64(e){var t=new Uint8Array(8),n=new DataView(t.buffer),e=P.from(e);return n.setInt32(0,e.lo,!0),n.setInt32(4,e.hi,!0),this.raw(t)}int64(e){return U((e=V.from(e)).lo,e.hi,this.buf),this}sint64(e){var e=V.from(e),t=e.hi>>31;return U(e.lo<<1^t,(e.hi<<1|e.lo>>>31)^t,this.buf),this}uint64(e){return U((e=P.from(e)).lo,e.hi,this.buf),this}}let e_={readUnknownField:!0,readerFactory:e=>new em(e)};function e$(e){return e?{...e_,...e}:e_}class em{constructor(e,t){this.varint64=E,this.uint32=F,this.buf=e,this.len=e.length,this.pos=0,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength),this.textDecoder=t??new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0})}tag(){var e=this.uint32(),t=e>>>3,e=7&e;if(t<=0||e<0||5<e)throw Error("illegal tag: field no "+t+" wire type "+e);return[t,e]}skip(e){var t,n=this.pos;switch(e){case h.Varint:for(;128&this.buf[this.pos++];);break;case h.Bit64:this.pos+=4;case h.Bit32:this.pos+=4;break;case h.LengthDelimited:var i=this.uint32();this.pos+=i;break;case h.StartGroup:for(;(t=this.tag()[1])!==h.EndGroup;)this.skip(t);break;default:throw Error("cant skip wire type "+e)}return this.assertBounds(),this.buf.subarray(n,this.pos)}assertBounds(){if(this.pos>this.len)throw RangeError("premature EOF")}int32(){return 0|this.uint32()}sint32(){var e=this.uint32();return e>>>1^-(1&e)}int64(){return new V(...this.varint64())}uint64(){return new P(...this.varint64())}sint64(){var[e,t]=this.varint64(),n=-(1&e),e=(e>>>1|(1&t)<<31)^n,t=t>>>1^n;return new V(e,t)}bool(){var[e,t]=this.varint64();return 0!==e||0!==t}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return new P(this.sfixed32(),this.sfixed32())}sfixed64(){return new V(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){var e=this.uint32(),t=this.pos;return this.pos+=e,this.assertBounds(),this.buf.subarray(t,t+e)}string(){return this.textDecoder.decode(this.bytes())}}class eg{constructor(e,t,n){this.defaultCheckDepth=16,this.typeName=e,this.fields=t.map(b),this.options=n??{},this.refTypeCheck=new k(this),this.refJsonReader=new G(this),this.refJsonWriter=new Y(this),this.refBinReader=new Q(this),this.refBinWriter=new ee(this)}create(e){var t=et(this);return void 0!==e&&en(this,t,e),t}clone(e){var t=this.create();return en(this,t,e),t}equals(e,t){return eo(this,e,t)}is(e,t=this.defaultCheckDepth){return this.refTypeCheck.is(e,t,!1)}isAssignable(e,t=this.defaultCheckDepth){return this.refTypeCheck.is(e,t,!0)}mergePartial(e,t){en(this,e,t)}fromBinary(e,t){return t=e$(t),this.internalBinaryRead(t.readerFactory(e),e.byteLength,t)}fromJson(e,t){return this.internalJsonRead(e,ea(t))}fromJsonString(e,t){return e=JSON.parse(e),this.fromJson(e,t)}toJson(e,t){return this.internalJsonWrite(e,es(t))}toJsonString(e,t){return JSON.stringify(e=this.toJson(e,t),null,(null==t?void 0:t.prettySpaces)??0)}toBinary(e,t){return t=ef(t),this.internalBinaryWrite(e,t.writerFactory(),t).finish()}internalJsonRead(e,t,n){if(null===e||"object"!=typeof e||Array.isArray(e))throw Error(`Unable to parse message ${this.typeName} from JSON ${v(e)}.`);return n=n??this.create(),this.refJsonReader.read(e,n,t),n}internalJsonWrite(e,t){return this.refJsonWriter.write(e,t)}internalBinaryWrite(e,t,n){return this.refBinWriter.write(e,t,n),t}internalBinaryRead(e,t,n,i){return i=i??this.create(),this.refBinReader.read(e,i,n,t),i}}switch(FORMAT){case"application/protobuf":case"application/x-protobuf":case"application/vnd.google.protobuf":break;case"application/grpc":case"application/grpc+proto":!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).pako={})}(this,function(e){"use strict";function t(e){let t=e.length;for(;--t>=0;)e[t]=0}let n=286,i=30,r=15,a=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),s=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),o=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),l=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),d=Array(576);t(d);let h=Array(60);t(h);let u=Array(512);t(u);let c=Array(256);t(c);let f=Array(29);t(f);let p=Array(i);function _(e,t,n,i,r){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=i,this.max_length=r,this.has_stree=e&&e.length}let m,g,w;function b(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}t(p);let y=e=>e<256?u[e]:u[256+(e>>>7)],k=(e,t)=>{e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},v=(e,t,n)=>{e.bi_valid>16-n?(e.bi_buf|=t<<e.bi_valid&65535,k(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=n-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)},B=(e,t,n)=>{v(e,n[2*t],n[2*t+1])},N=(e,t)=>{let n=0;do n|=1&e,e>>>=1,n<<=1;while(--t>0);return n>>>1},T=(e,t,n)=>{let i=Array(16),a,s,o=0;for(a=1;a<=r;a++)i[a]=o=o+n[a-1]<<1;for(s=0;s<=t;s++){let l=e[2*s+1];0!==l&&(e[2*s]=N(i[l]++,l))}},x=e=>{let t;for(t=0;t<n;t++)e.dyn_ltree[2*t]=0;for(t=0;t<i;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0},R=e=>{e.bi_valid>8?k(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},I=(e,t,n,i)=>{let r=2*t,a=2*n;return e[r]<e[a]||e[r]===e[a]&&i[t]<=i[n]},E=(e,t,n)=>{let i=e.heap[n],r=n<<1;for(;r<=e.heap_len&&(r<e.heap_len&&I(t,e.heap[r+1],e.heap[r],e.depth)&&r++,!I(t,i,e.heap[r],e.depth));)e.heap[n]=e.heap[r],n=r,r<<=1;e.heap[n]=i},U=(e,t,n)=>{let i,r,o,l,d=0;if(0!==e.last_lit)do i=e.pending_buf[e.d_buf+2*d]<<8|e.pending_buf[e.d_buf+2*d+1],r=e.pending_buf[e.l_buf+d],d++,0===i?B(e,r,t):(B(e,(o=c[r])+256+1,t),0!==(l=a[o])&&v(e,r-=f[o],l),o=y(--i),B(e,o,n),0!==(l=s[o])&&v(e,i-=p[o],l));while(d<e.last_lit);B(e,256,t)},S=(e,t)=>{let n=t.dyn_tree,i=t.stat_desc.static_tree,a=t.stat_desc.has_stree,s=t.stat_desc.elems,o,l,d,h=-1;for(e.heap_len=0,e.heap_max=573,o=0;o<s;o++)0!==n[2*o]?(e.heap[++e.heap_len]=h=o,e.depth[o]=0):n[2*o+1]=0;for(;e.heap_len<2;)n[2*(d=e.heap[++e.heap_len]=h<2?++h:0)]=1,e.depth[d]=0,e.opt_len--,a&&(e.static_len-=i[2*d+1]);for(t.max_code=h,o=e.heap_len>>1;o>=1;o--)E(e,n,o);d=s;do o=e.heap[1],e.heap[1]=e.heap[e.heap_len--],E(e,n,1),l=e.heap[1],e.heap[--e.heap_max]=o,e.heap[--e.heap_max]=l,n[2*d]=n[2*o]+n[2*l],e.depth[d]=(e.depth[o]>=e.depth[l]?e.depth[o]:e.depth[l])+1,n[2*o+1]=n[2*l+1]=d,e.heap[1]=d++,E(e,n,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],((e,t)=>{let n=t.dyn_tree,i=t.max_code,a=t.stat_desc.static_tree,s=t.stat_desc.has_stree,o=t.stat_desc.extra_bits,l=t.stat_desc.extra_base,d=t.stat_desc.max_length,h,u,c,f,p,_,m=0;for(f=0;f<=r;f++)e.bl_count[f]=0;for(n[2*e.heap[e.heap_max]+1]=0,h=e.heap_max+1;h<573;h++)(f=n[2*n[2*(u=e.heap[h])+1]+1]+1)>d&&(f=d,m++),n[2*u+1]=f,u>i||(e.bl_count[f]++,p=0,u>=l&&(p=o[u-l]),_=n[2*u],e.opt_len+=_*(f+p),s&&(e.static_len+=_*(a[2*u+1]+p)));if(0!==m){do{for(f=d-1;0===e.bl_count[f];)f--;e.bl_count[f]--,e.bl_count[f+1]+=2,e.bl_count[d]--,m-=2}while(m>0);for(f=d;0!==f;f--)for(u=e.bl_count[f];0!==u;)(c=e.heap[--h])>i||(n[2*c+1]!==f&&(e.opt_len+=(f-n[2*c+1])*n[2*c],n[2*c+1]=f),u--)}})(e,t),T(n,h,e.bl_count)},D=(e,t,n)=>{let i,r,a=-1,s=t[1],o=0,l=7,d=4;for(0===s&&(l=138,d=3),t[2*(n+1)+1]=65535,i=0;i<=n;i++)r=s,s=t[2*(i+1)+1],++o<l&&r===s||(o<d?e.bl_tree[2*r]+=o:0!==r?(r!==a&&e.bl_tree[2*r]++,e.bl_tree[32]++):o<=10?e.bl_tree[34]++:e.bl_tree[36]++,o=0,a=r,0===s?(l=138,d=3):r===s?(l=6,d=3):(l=7,d=4))},L=(e,t,n)=>{let i,r,a=-1,s=t[1],o=0,l=7,d=4;for(0===s&&(l=138,d=3),i=0;i<=n;i++)if(r=s,s=t[2*(i+1)+1],!(++o<l&&r===s)){if(o<d)do B(e,r,e.bl_tree);while(0!=--o);else 0!==r?(r!==a&&(B(e,r,e.bl_tree),o--),B(e,16,e.bl_tree),v(e,o-3,2)):o<=10?(B(e,17,e.bl_tree),v(e,o-3,3)):(B(e,18,e.bl_tree),v(e,o-11,7));o=0,a=r,0===s?(l=138,d=3):r===s?(l=6,d=3):(l=7,d=4)}},F=!1,O=(e,t,n,i)=>{var r,a,s,o;v(e,0+(i?1:0),3),r=e,a=t,s=n,o=!0,R(r),o&&(k(r,s),k(r,~s)),r.pending_buf.set(r.window.subarray(a,a+s),r.pending),r.pending+=s};var C={_tr_init(e){F||((()=>{let e,t,l,b,y,k=Array(16);for(l=0,b=0;b<28;b++)for(f[b]=l,e=0;e<1<<a[b];e++)c[l++]=b;for(c[l-1]=b,y=0,b=0;b<16;b++)for(p[b]=y,e=0;e<1<<s[b];e++)u[y++]=b;for(y>>=7;b<i;b++)for(p[b]=y<<7,e=0;e<1<<s[b]-7;e++)u[256+y++]=b;for(t=0;t<=r;t++)k[t]=0;for(e=0;e<=143;)d[2*e+1]=8,e++,k[8]++;for(;e<=255;)d[2*e+1]=9,e++,k[9]++;for(;e<=279;)d[2*e+1]=7,e++,k[7]++;for(;e<=287;)d[2*e+1]=8,e++,k[8]++;for(T(d,287,k),e=0;e<i;e++)h[2*e+1]=5,h[2*e]=N(e,5);m=new _(d,a,257,n,r),g=new _(h,s,0,i,r),w=new _([],o,0,19,7)})(),F=!0),e.l_desc=new b(e.dyn_ltree,m),e.d_desc=new b(e.dyn_dtree,g),e.bl_desc=new b(e.bl_tree,w),e.bi_buf=0,e.bi_valid=0,x(e)},_tr_stored_block:O,_tr_flush_block(e,t,n,i){let r,a,s=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=(e=>{let t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<256;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0})(e)),S(e,e.l_desc),S(e,e.d_desc),s=(e=>{let t;for(D(e,e.dyn_ltree,e.l_desc.max_code),D(e,e.dyn_dtree,e.d_desc.max_code),S(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*l[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t})(e),r=e.opt_len+3+7>>>3,(a=e.static_len+3+7>>>3)<=r&&(r=a)):r=a=n+5,n+4<=r&&-1!==t?O(e,t,n,i):4===e.strategy||a===r?(v(e,2+(i?1:0),3),U(e,d,h)):(v(e,4+(i?1:0),3),((e,t,n,i)=>{let r;for(v(e,t-257,5),v(e,n-1,5),v(e,i-4,4),r=0;r<i;r++)v(e,e.bl_tree[2*l[r]+1],3);L(e,e.dyn_ltree,t-1),L(e,e.dyn_dtree,n-1)})(e,e.l_desc.max_code+1,e.d_desc.max_code+1,s+1),U(e,e.dyn_ltree,e.dyn_dtree)),x(e),i&&R(e)},_tr_tally:(e,t,n)=>(e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(c[n]+256+1)]++,e.dyn_dtree[2*y(t)]++),e.last_lit===e.lit_bufsize-1),_tr_align(e){var t;v(e,2,3),B(e,256,d),16===(t=e).bi_valid?(k(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}},j=(e,t,n,i)=>{let r=65535&e|0,a=e>>>16&65535|0,s=0;for(;0!==n;){s=n>2e3?2e3:n,n-=s;do a=a+(r=r+t[i++]|0)|0;while(--s);r%=65521,a%=65521}return r|a<<16|0};let A=new Uint32Array((()=>{let e,t=[];for(var n=0;n<256;n++){e=n;for(var i=0;i<8;i++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t})());var z=(e,t,n,i)=>{let r=A,a=i+n;e^=-1;for(let s=i;s<a;s++)e=e>>>8^r[255&(e^t[s])];return -1^e},W={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},P={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};let{_tr_init:M,_tr_stored_block:V,_tr_flush_block:Z,_tr_tally:K,_tr_align:X}=C,{Z_NO_FLUSH:H,Z_PARTIAL_FLUSH:J,Z_FULL_FLUSH:G,Z_FINISH:Y,Z_BLOCK:q,Z_OK:Q,Z_STREAM_END:ee,Z_STREAM_ERROR:et,Z_DATA_ERROR:en,Z_BUF_ERROR:ei,Z_DEFAULT_COMPRESSION:er,Z_FILTERED:ea,Z_HUFFMAN_ONLY:es,Z_RLE:eo,Z_FIXED:el,Z_DEFAULT_STRATEGY:ed,Z_UNKNOWN:eh,Z_DEFLATED:eu}=P,ec=103,ef=113,ep=666,e_=(e,t)=>(e.msg=W[t],t),e$=e=>(e<<1)-(e>4?9:0),em=e=>{let t=e.length;for(;--t>=0;)e[t]=0},eg=(e,t,n)=>(t<<e.hash_shift^n)&e.hash_mask,ew=e=>{let t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+n),e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))},e0=(e,t)=>{Z(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,ew(e.strm)},eb=(e,t)=>{e.pending_buf[e.pending++]=t},ey=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},e8=(e,t,n,i)=>{let r=e.avail_in;return r>i&&(r=i),0===r?0:(e.avail_in-=r,t.set(e.input.subarray(e.next_in,e.next_in+r),n),1===e.state.wrap?e.adler=j(e.adler,t,r,n):2===e.state.wrap&&(e.adler=z(e.adler,t,r,n)),e.next_in+=r,e.total_in+=r,r)},ek=(e,t)=>{let n,i,r=e.max_chain_length,a=e.strstart,s=e.prev_length,o=e.nice_match,l=e.strstart>e.w_size-262?e.strstart-(e.w_size-262):0,d=e.window,h=e.w_mask,u=e.prev,c=e.strstart+258,f=d[a+s-1],p=d[a+s];e.prev_length>=e.good_match&&(r>>=2),o>e.lookahead&&(o=e.lookahead);do if(d[(n=t)+s]===p&&d[n+s-1]===f&&d[n]===d[a]&&d[++n]===d[a+1]){a+=2,n++;do;while(d[++a]===d[++n]&&d[++a]===d[++n]&&d[++a]===d[++n]&&d[++a]===d[++n]&&d[++a]===d[++n]&&d[++a]===d[++n]&&d[++a]===d[++n]&&d[++a]===d[++n]&&a<c);if(i=258-(c-a),a=c-258,i>s){if(e.match_start=t,s=i,i>=o)break;f=d[a+s-1],p=d[a+s]}}while((t=u[t&h])>l&&0!=--r);return s<=e.lookahead?s:e.lookahead},e3=e=>{let t=e.w_size,n,i,r,a,s;do{if(a=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-262)){e.window.set(e.window.subarray(t,t+t),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,n=i=e.hash_size;do r=e.head[--n],e.head[n]=r>=t?r-t:0;while(--i);n=i=t;do r=e.prev[--n],e.prev[n]=r>=t?r-t:0;while(--i);a+=t}if(0===e.strm.avail_in)break;if(i=e8(e.strm,e.window,e.strstart+e.lookahead,a),e.lookahead+=i,e.lookahead+e.insert>=3)for(s=e.strstart-e.insert,e.ins_h=e.window[s],e.ins_h=eg(e,e.ins_h,e.window[s+1]);e.insert&&(e.ins_h=eg(e,e.ins_h,e.window[s+3-1]),e.prev[s&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=s,s++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<262&&0!==e.strm.avail_in)},ev=(e,t)=>{let n,i;for(;;){if(e.lookahead<262){if(e3(e),e.lookahead<262&&t===H)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=eg(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-262&&(e.match_length=ek(e,n)),e.match_length>=3){if(i=K(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do e.strstart++,e.ins_h=eg(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=eg(e,e.ins_h,e.window[e.strstart+1])}else i=K(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(i&&(e0(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,t===Y?(e0(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(e0(e,!1),0===e.strm.avail_out)?1:2},e1=(e,t)=>{let n,i,r;for(;;){if(e.lookahead<262){if(e3(e),e.lookahead<262&&t===H)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=eg(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-262&&(e.match_length=ek(e,n),e.match_length<=5&&(e.strategy===ea||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){r=e.strstart+e.lookahead-3,i=K(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=r&&(e.ins_h=eg(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(0!=--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,i&&(e0(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if((i=K(e,0,e.window[e.strstart-1]))&&e0(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(i=K(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===Y?(e0(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(e0(e,!1),0===e.strm.avail_out)?1:2};function e4(e,t,n,i,r){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=i,this.func=r}let e6=[new e4(0,0,0,0,(e,t)=>{let n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(e3(e),0===e.lookahead&&t===H)return 1;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;let i=e.block_start+n;if((0===e.strstart||e.strstart>=i)&&(e.lookahead=e.strstart-i,e.strstart=i,e0(e,!1),0===e.strm.avail_out)||e.strstart-e.block_start>=e.w_size-262&&(e0(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===Y?(e0(e,!0),0===e.strm.avail_out?3:4):(e.strstart>e.block_start&&(e0(e,!1),e.strm.avail_out),1)}),new e4(4,4,8,4,ev),new e4(4,5,16,8,ev),new e4(4,6,32,32,ev),new e4(4,4,16,16,e1),new e4(8,16,32,32,e1),new e4(8,16,128,128,e1),new e4(8,32,128,256,e1),new e4(32,128,258,1024,e1),new e4(32,258,258,4096,e1)];function e2(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=eu,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),em(this.dyn_ltree),em(this.dyn_dtree),em(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),em(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),em(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}let eB=e=>{if(!e||!e.state)return e_(e,et);e.total_in=e.total_out=0,e.data_type=eh;let t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?42:ef,e.adler=2===t.wrap?0:1,t.last_flush=H,M(t),Q},e9=e=>{var t;let n=eB(e);return n===Q&&((t=e.state).window_size=2*t.w_size,em(t.head),t.max_lazy_match=e6[t.level].max_lazy,t.good_match=e6[t.level].good_length,t.nice_match=e6[t.level].nice_length,t.max_chain_length=e6[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=2,t.match_available=0,t.ins_h=0),n},eN=(e,t,n,i,r,a)=>{if(!e)return et;let s=1;if(t===er&&(t=6),i<0?(s=0,i=-i):i>15&&(s=2,i-=16),r<1||r>9||n!==eu||i<8||i>15||t<0||t>9||a<0||a>el)return e_(e,et);8===i&&(i=9);let o=new e2;return e.state=o,o.strm=e,o.wrap=s,o.gzhead=null,o.w_bits=i,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=r+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+3-1)/3),o.window=new Uint8Array(2*o.w_size),o.head=new Uint16Array(o.hash_size),o.prev=new Uint16Array(o.w_size),o.lit_bufsize=1<<r+6,o.pending_buf_size=4*o.lit_bufsize,o.pending_buf=new Uint8Array(o.pending_buf_size),o.d_buf=1*o.lit_bufsize,o.l_buf=3*o.lit_bufsize,o.level=t,o.strategy=a,o.method=n,e9(e)};var eT={deflateInit:(e,t)=>eN(e,t,eu,15,8,ed),deflateInit2:eN,deflateReset:e9,deflateResetKeep:eB,deflateSetHeader:(e,t)=>e&&e.state?2!==e.state.wrap?et:(e.state.gzhead=t,Q):et,deflate(e,t){let n,i;if(!e||!e.state||t>q||t<0)return e?e_(e,et):et;let r=e.state;if(!e.output||!e.input&&0!==e.avail_in||r.status===ep&&t!==Y)return e_(e,0===e.avail_out?ei:et);r.strm=e;let a=r.last_flush;if(r.last_flush=t,42===r.status){if(2===r.wrap)e.adler=0,eb(r,31),eb(r,139),eb(r,8),r.gzhead?(eb(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),eb(r,255&r.gzhead.time),eb(r,r.gzhead.time>>8&255),eb(r,r.gzhead.time>>16&255),eb(r,r.gzhead.time>>24&255),eb(r,9===r.level?2:r.strategy>=es||r.level<2?4:0),eb(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(eb(r,255&r.gzhead.extra.length),eb(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(e.adler=z(e.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=69):(eb(r,0),eb(r,0),eb(r,0),eb(r,0),eb(r,0),eb(r,9===r.level?2:r.strategy>=es||r.level<2?4:0),eb(r,3),r.status=ef);else{let s=eu+(r.w_bits-8<<4)<<8,o=-1;s|=(o=r.strategy>=es||r.level<2?0:r.level<6?1:6===r.level?2:3)<<6,0!==r.strstart&&(s|=32),s+=31-s%31,r.status=ef,ey(r,s),0!==r.strstart&&(ey(r,e.adler>>>16),ey(r,65535&e.adler)),e.adler=1}}if(69===r.status){if(r.gzhead.extra){for(n=r.pending;r.gzindex<(65535&r.gzhead.extra.length)&&(r.pending!==r.pending_buf_size||(r.gzhead.hcrc&&r.pending>n&&(e.adler=z(e.adler,r.pending_buf,r.pending-n,n)),ew(e),n=r.pending,r.pending!==r.pending_buf_size));)eb(r,255&r.gzhead.extra[r.gzindex]),r.gzindex++;r.gzhead.hcrc&&r.pending>n&&(e.adler=z(e.adler,r.pending_buf,r.pending-n,n)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=73)}else r.status=73}if(73===r.status){if(r.gzhead.name){n=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>n&&(e.adler=z(e.adler,r.pending_buf,r.pending-n,n)),ew(e),n=r.pending,r.pending===r.pending_buf_size)){i=1;break}i=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,eb(r,i)}while(0!==i);r.gzhead.hcrc&&r.pending>n&&(e.adler=z(e.adler,r.pending_buf,r.pending-n,n)),0===i&&(r.gzindex=0,r.status=91)}else r.status=91}if(91===r.status){if(r.gzhead.comment){n=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>n&&(e.adler=z(e.adler,r.pending_buf,r.pending-n,n)),ew(e),n=r.pending,r.pending===r.pending_buf_size)){i=1;break}i=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,eb(r,i)}while(0!==i);r.gzhead.hcrc&&r.pending>n&&(e.adler=z(e.adler,r.pending_buf,r.pending-n,n)),0===i&&(r.status=ec)}else r.status=ec}if(r.status===ec&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&ew(e),r.pending+2<=r.pending_buf_size&&(eb(r,255&e.adler),eb(r,e.adler>>8&255),e.adler=0,r.status=ef)):r.status=ef),0!==r.pending){if(ew(e),0===e.avail_out)return r.last_flush=-1,Q}else if(0===e.avail_in&&e$(t)<=e$(a)&&t!==Y)return e_(e,ei);if(r.status===ep&&0!==e.avail_in)return e_(e,ei);if(0!==e.avail_in||0!==r.lookahead||t!==H&&r.status!==ep){let l=r.strategy===es?((e,t)=>{let n;for(;;){if(0===e.lookahead&&(e3(e),0===e.lookahead)){if(t===H)return 1;break}if(e.match_length=0,n=K(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(e0(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===Y?(e0(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(e0(e,!1),0===e.strm.avail_out)?1:2})(r,t):r.strategy===eo?((e,t)=>{let n,i,r,a,s=e.window;for(;;){if(e.lookahead<=258){if(e3(e),e.lookahead<=258&&t===H)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(i=s[r=e.strstart-1])===s[++r]&&i===s[++r]&&i===s[++r]){a=e.strstart+258;do;while(i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&r<a);e.match_length=258-(a-r),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(n=K(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=K(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(e0(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===Y?(e0(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(e0(e,!1),0===e.strm.avail_out)?1:2})(r,t):e6[r.level].func(r,t);if(3!==l&&4!==l||(r.status=ep),1===l||3===l)return 0===e.avail_out&&(r.last_flush=-1),Q;if(2===l&&(t===J?X(r):t!==q&&(V(r,0,0,!1),t===G&&(em(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),ew(e),0===e.avail_out))return r.last_flush=-1,Q}return t!==Y?Q:r.wrap<=0?ee:(2===r.wrap?(eb(r,255&e.adler),eb(r,e.adler>>8&255),eb(r,e.adler>>16&255),eb(r,e.adler>>24&255),eb(r,255&e.total_in),eb(r,e.total_in>>8&255),eb(r,e.total_in>>16&255),eb(r,e.total_in>>24&255)):(ey(r,e.adler>>>16),ey(r,65535&e.adler)),ew(e),r.wrap>0&&(r.wrap=-r.wrap),0!==r.pending?Q:ee)},deflateEnd(e){if(!e||!e.state)return et;let t=e.state.status;return 42!==t&&69!==t&&73!==t&&91!==t&&t!==ec&&t!==ef&&t!==ep?e_(e,et):(e.state=null,t===ef?e_(e,en):Q)},deflateSetDictionary(e,t){let n=t.length;if(!e||!e.state)return et;let i=e.state,r=i.wrap;if(2===r||1===r&&42!==i.status||i.lookahead)return et;if(1===r&&(e.adler=j(e.adler,t,n,0)),i.wrap=0,n>=i.w_size){0===r&&(em(i.head),i.strstart=0,i.block_start=0,i.insert=0);let a=new Uint8Array(i.w_size);a.set(t.subarray(n-i.w_size,n),0),t=a,n=i.w_size}let s=e.avail_in,o=e.next_in,l=e.input;for(e.avail_in=n,e.next_in=0,e.input=t,e3(i);i.lookahead>=3;){let d=i.strstart,h=i.lookahead-2;do i.ins_h=eg(i,i.ins_h,i.window[d+3-1]),i.prev[d&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=d,d++;while(--h);i.strstart=d,i.lookahead=2,e3(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=2,i.match_available=0,e.next_in=o,e.input=l,e.avail_in=s,i.wrap=r,Q},deflateInfo:"pako deflate (from Nodeca project)"};let ex=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var e7=function(e){let t=Array.prototype.slice.call(arguments,1);for(;t.length;){let n=t.shift();if(n){if("object"!=typeof n)throw TypeError(n+"must be non-object");for(let i in n)ex(n,i)&&(e[i]=n[i])}}return e},eR=e=>{let t=0;for(let n=0,i=e.length;n<i;n++)t+=e[n].length;let r=new Uint8Array(t);for(let a=0,s=0,o=e.length;a<o;a++){let l=e[a];r.set(l,s),s+=l.length}return r};let eI=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(eE){eI=!1}let eU=new Uint8Array(256);for(let eS=0;eS<256;eS++)eU[eS]=eS>=252?6:eS>=248?5:eS>=240?4:eS>=224?3:eS>=192?2:1;eU[254]=eU[254]=1;var e5=e=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);let t,n,i,r,a,s=e.length,o=0;for(r=0;r<s;r++)55296==(64512&(n=e.charCodeAt(r)))&&r+1<s&&56320==(64512&(i=e.charCodeAt(r+1)))&&(n=65536+(n-55296<<10)+(i-56320),r++),o+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(o),a=0,r=0;a<o;r++)55296==(64512&(n=e.charCodeAt(r)))&&r+1<s&&56320==(64512&(i=e.charCodeAt(r+1)))&&(n=65536+(n-55296<<10)+(i-56320),r++),n<128?t[a++]=n:n<2048?(t[a++]=192|n>>>6,t[a++]=128|63&n):n<65536?(t[a++]=224|n>>>12,t[a++]=128|n>>>6&63,t[a++]=128|63&n):(t[a++]=240|n>>>18,t[a++]=128|n>>>12&63,t[a++]=128|n>>>6&63,t[a++]=128|63&n);return t},eD=(e,t)=>{let n=t||e.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,t));let i,r,a=Array(2*n);for(r=0,i=0;i<n;){let s=e[i++];if(s<128){a[r++]=s;continue}let o=eU[s];if(o>4)a[r++]=65533,i+=o-1;else{for(s&=2===o?31:3===o?15:7;o>1&&i<n;)s=s<<6|63&e[i++],o--;o>1?a[r++]=65533:s<65536?a[r++]=s:(s-=65536,a[r++]=55296|s>>10&1023,a[r++]=56320|1023&s)}}return((e,t)=>{if(t<65534&&e.subarray&&eI)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let n="";for(let i=0;i<t;i++)n+=String.fromCharCode(e[i]);return n})(a,r)},eL=(e,t)=>{(t=t||e.length)>e.length&&(t=e.length);let n=t-1;for(;n>=0&&128==(192&e[n]);)n--;return n<0||0===n?t:n+eU[e[n]]>t?n:t},eF=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};let eO=Object.prototype.toString,{Z_NO_FLUSH:eC,Z_SYNC_FLUSH:ej,Z_FULL_FLUSH:eA,Z_FINISH:ez,Z_OK:eW,Z_STREAM_END:eP,Z_DEFAULT_COMPRESSION:eM,Z_DEFAULT_STRATEGY:eV,Z_DEFLATED:eZ}=P;function eK(e){this.options=e7({level:eM,method:eZ,chunkSize:16384,windowBits:15,memLevel:8,strategy:eV},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new eF,this.strm.avail_out=0;let n=eT.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==eW)throw Error(W[n]);if(t.header&&eT.deflateSetHeader(this.strm,t.header),t.dictionary){let i;if(i="string"==typeof t.dictionary?e5(t.dictionary):"[object ArrayBuffer]"===eO.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(n=eT.deflateSetDictionary(this.strm,i))!==eW)throw Error(W[n]);this._dict_set=!0}}function eX(e,t){let n=new eK(t);if(n.push(e,!0),n.err)throw n.msg||W[n.err];return n.result}eK.prototype.push=function(e,t){let n=this.strm,i=this.options.chunkSize,r,a;if(this.ended)return!1;for(a=t===~~t?t:!0===t?ez:eC,"string"==typeof e?n.input=e5(e):"[object ArrayBuffer]"===eO.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;)if(0===n.avail_out&&(n.output=new Uint8Array(i),n.next_out=0,n.avail_out=i),(a===ej||a===eA)&&n.avail_out<=6)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else{if((r=eT.deflate(n,a))===eP)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),r=eT.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===eW;if(0!==n.avail_out){if(a>0&&n.next_out>0)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else if(0===n.avail_in)break}else this.onData(n.output)}return!0},eK.prototype.onData=function(e){this.chunks.push(e)},eK.prototype.onEnd=function(e){e===eW&&(this.result=eR(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var eH=function(e,t){let n,i,r,a,s,o,l,d,h,u,c,f,p,_,m,g,w,b,y,k,v,B,N,T,x=e.state;n=e.next_in,N=e.input,i=n+(e.avail_in-5),r=e.next_out,T=e.output,a=r-(t-e.avail_out),s=r+(e.avail_out-257),o=x.dmax,l=x.wsize,d=x.whave,h=x.wnext,u=x.window,c=x.hold,f=x.bits,p=x.lencode,_=x.distcode,m=(1<<x.lenbits)-1,g=(1<<x.distbits)-1;t:do{f<15&&(c+=N[n++]<<f,f+=8,c+=N[n++]<<f,f+=8),w=p[c&m];e:for(;;){if(c>>>=b=w>>>24,f-=b,0==(b=w>>>16&255))T[r++]=65535&w;else{if(!(16&b)){if(0==(64&b)){w=p[(65535&w)+(c&(1<<b)-1)];continue e}if(32&b){x.mode=12;break t}e.msg="invalid literal/length code",x.mode=30;break t}y=65535&w,(b&=15)&&(f<b&&(c+=N[n++]<<f,f+=8),y+=c&(1<<b)-1,c>>>=b,f-=b),f<15&&(c+=N[n++]<<f,f+=8,c+=N[n++]<<f,f+=8),w=_[c&g];a:for(;;){if(c>>>=b=w>>>24,f-=b,!(16&(b=w>>>16&255))){if(0==(64&b)){w=_[(65535&w)+(c&(1<<b)-1)];continue a}e.msg="invalid distance code",x.mode=30;break t}if(k=65535&w,f<(b&=15)&&(c+=N[n++]<<f,(f+=8)<b&&(c+=N[n++]<<f,f+=8)),(k+=c&(1<<b)-1)>o){e.msg="invalid distance too far back",x.mode=30;break t}if(c>>>=b,f-=b,k>(b=r-a)){if((b=k-b)>d&&x.sane){e.msg="invalid distance too far back",x.mode=30;break t}if(v=0,B=u,0===h){if(v+=l-b,b<y){y-=b;do T[r++]=u[v++];while(--b);v=r-k,B=T}}else if(h<b){if(v+=l+h-b,(b-=h)<y){y-=b;do T[r++]=u[v++];while(--b);if(v=0,h<y){y-=b=h;do T[r++]=u[v++];while(--b);v=r-k,B=T}}}else if(v+=h-b,b<y){y-=b;do T[r++]=u[v++];while(--b);v=r-k,B=T}for(;y>2;)T[r++]=B[v++],T[r++]=B[v++],T[r++]=B[v++],y-=3;y&&(T[r++]=B[v++],y>1&&(T[r++]=B[v++]))}else{v=r-k;do T[r++]=T[v++],T[r++]=T[v++],T[r++]=T[v++],y-=3;while(y>2);y&&(T[r++]=T[v++],y>1&&(T[r++]=T[v++]))}break}}break}}while(n<i&&r<s);n-=y=f>>3,f-=y<<3,c&=(1<<f)-1,e.next_in=n,e.next_out=r,e.avail_in=n<i?i-n+5:5-(n-i),e.avail_out=r<s?s-r+257:257-(r-s),x.hold=c,x.bits=f};let eJ=15,eG=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),eY=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),eq=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),eQ=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var te=(e,t,n,i,r,a,s,o)=>{let l=o.bits,d,h,u,c,f,p,_=0,m=0,g=0,w=0,b=0,y=0,k=0,v=0,B=0,N=0,T=null,x=0,R=new Uint16Array(16),I=new Uint16Array(16),E,U,S,D=null,L=0;for(_=0;_<=eJ;_++)R[_]=0;for(m=0;m<i;m++)R[t[n+m]]++;for(b=l,w=eJ;w>=1&&0===R[w];w--);if(b>w&&(b=w),0===w)return r[a++]=20971520,r[a++]=20971520,o.bits=1,0;for(g=1;g<w&&0===R[g];g++);for(b<g&&(b=g),v=1,_=1;_<=eJ;_++)if(v<<=1,(v-=R[_])<0)return -1;if(v>0&&(0===e||1!==w))return -1;for(I[1]=0,_=1;_<eJ;_++)I[_+1]=I[_]+R[_];for(m=0;m<i;m++)0!==t[n+m]&&(s[I[t[n+m]]++]=m);if(0===e?(T=D=s,p=19):1===e?(T=eG,x-=257,D=eY,L-=257,p=256):(T=eq,D=eQ,p=-1),N=0,m=0,_=g,f=a,y=b,k=0,u=-1,c=(B=1<<b)-1,1===e&&B>852||2===e&&B>592)return 1;for(;;){E=_-k,s[m]<p?(U=0,S=s[m]):s[m]>p?(U=D[L+s[m]],S=T[x+s[m]]):(U=96,S=0),d=1<<_-k,g=h=1<<y;do r[f+(N>>k)+(h-=d)]=E<<24|U<<16|S|0;while(0!==h);for(d=1<<_-1;N&d;)d>>=1;if(0!==d?(N&=d-1,N+=d):N=0,m++,0==--R[_]){if(_===w)break;_=t[n+s[m]]}if(_>b&&(N&c)!==u){for(0===k&&(k=b),f+=g,v=1<<(y=_-k);y+k<w&&!((v-=R[y+k])<=0);)y++,v<<=1;if(B+=1<<y,1===e&&B>852||2===e&&B>592)return 1;r[u=N&c]=b<<24|y<<16|f-a|0}}return 0!==N&&(r[f+N]=_-k<<24|4194304),o.bits=b,0};let{Z_FINISH:tt,Z_BLOCK:tn,Z_TREES:ti,Z_OK:tr,Z_STREAM_END:ta,Z_NEED_DICT:ts,Z_STREAM_ERROR:to,Z_DATA_ERROR:tl,Z_MEM_ERROR:td,Z_BUF_ERROR:th,Z_DEFLATED:tu}=P,tc=12,tf=30,tp=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function t_(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}let t$=e=>{if(!e||!e.state)return to;let t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=1,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,tr},tm=e=>{if(!e||!e.state)return to;let t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,t$(e)},tg=(e,t)=>{let n;if(!e||!e.state)return to;let i=e.state;return t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?to:(null!==i.window&&i.wbits!==t&&(i.window=null),i.wrap=n,i.wbits=t,tm(e))},tw=(e,t)=>{if(!e)return to;let n=new t_;e.state=n,n.window=null;let i=tg(e,t);return i!==tr&&(e.state=null),i},t0,tb,ty=!0,t8=e=>{if(ty){t0=new Int32Array(512),tb=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(te(1,e.lens,0,288,t0,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;te(2,e.lens,0,32,tb,0,e.work,{bits:5}),ty=!1}e.lencode=t0,e.lenbits=9,e.distcode=tb,e.distbits=5},tk=(e,t,n,i)=>{let r,a=e.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),i>=a.wsize?(a.window.set(t.subarray(n-a.wsize,n),0),a.wnext=0,a.whave=a.wsize):((r=a.wsize-a.wnext)>i&&(r=i),a.window.set(t.subarray(n-i,n-i+r),a.wnext),(i-=r)?(a.window.set(t.subarray(n-i,n),0),a.wnext=i,a.whave=a.wsize):(a.wnext+=r,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=r))),0};var t3={inflateReset:tm,inflateReset2:tg,inflateResetKeep:t$,inflateInit:e=>tw(e,15),inflateInit2:tw,inflate(e,t){let n,i,r,a,s,o,l,d,h,u,c,f,p,_,m,g,w,b,y,k,v,B,N=0,T=new Uint8Array(4),x,R,I=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return to;(n=e.state).mode===tc&&(n.mode=13),s=e.next_out,r=e.output,l=e.avail_out,a=e.next_in,i=e.input,o=e.avail_in,d=n.hold,h=n.bits,u=o,c=l,B=tr;t:for(;;)switch(n.mode){case 1:if(0===n.wrap){n.mode=13;break}for(;h<16;){if(0===o)break t;o--,d+=i[a++]<<h,h+=8}if(2&n.wrap&&35615===d){n.check=0,T[0]=255&d,T[1]=d>>>8&255,n.check=z(n.check,T,2,0),d=0,h=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&d)<<8)+(d>>8))%31){e.msg="incorrect header check",n.mode=tf;break}if((15&d)!==tu){e.msg="unknown compression method",n.mode=tf;break}if(d>>>=4,h-=4,v=8+(15&d),0===n.wbits)n.wbits=v;else if(v>n.wbits){e.msg="invalid window size",n.mode=tf;break}n.dmax=1<<n.wbits,e.adler=n.check=1,n.mode=512&d?10:tc,d=0,h=0;break;case 2:for(;h<16;){if(0===o)break t;o--,d+=i[a++]<<h,h+=8}if(n.flags=d,(255&n.flags)!==tu){e.msg="unknown compression method",n.mode=tf;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=tf;break}n.head&&(n.head.text=d>>8&1),512&n.flags&&(T[0]=255&d,T[1]=d>>>8&255,n.check=z(n.check,T,2,0)),d=0,h=0,n.mode=3;case 3:for(;h<32;){if(0===o)break t;o--,d+=i[a++]<<h,h+=8}n.head&&(n.head.time=d),512&n.flags&&(T[0]=255&d,T[1]=d>>>8&255,T[2]=d>>>16&255,T[3]=d>>>24&255,n.check=z(n.check,T,4,0)),d=0,h=0,n.mode=4;case 4:for(;h<16;){if(0===o)break t;o--,d+=i[a++]<<h,h+=8}n.head&&(n.head.xflags=255&d,n.head.os=d>>8),512&n.flags&&(T[0]=255&d,T[1]=d>>>8&255,n.check=z(n.check,T,2,0)),d=0,h=0,n.mode=5;case 5:if(1024&n.flags){for(;h<16;){if(0===o)break t;o--,d+=i[a++]<<h,h+=8}n.length=d,n.head&&(n.head.extra_len=d),512&n.flags&&(T[0]=255&d,T[1]=d>>>8&255,n.check=z(n.check,T,2,0)),d=0,h=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&((f=n.length)>o&&(f=o),f&&(n.head&&(v=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(i.subarray(a,a+f),v)),512&n.flags&&(n.check=z(n.check,i,f,a)),o-=f,a+=f,n.length-=f),n.length))break t;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===o)break t;f=0;do v=i[a+f++],n.head&&v&&n.length<65536&&(n.head.name+=String.fromCharCode(v));while(v&&f<o);if(512&n.flags&&(n.check=z(n.check,i,f,a)),o-=f,a+=f,v)break t}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===o)break t;f=0;do v=i[a+f++],n.head&&v&&n.length<65536&&(n.head.comment+=String.fromCharCode(v));while(v&&f<o);if(512&n.flags&&(n.check=z(n.check,i,f,a)),o-=f,a+=f,v)break t}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;h<16;){if(0===o)break t;o--,d+=i[a++]<<h,h+=8}if(d!==(65535&n.check)){e.msg="header crc mismatch",n.mode=tf;break}d=0,h=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=tc;break;case 10:for(;h<32;){if(0===o)break t;o--,d+=i[a++]<<h,h+=8}e.adler=n.check=tp(d),d=0,h=0,n.mode=11;case 11:if(0===n.havedict)return e.next_out=s,e.avail_out=l,e.next_in=a,e.avail_in=o,n.hold=d,n.bits=h,ts;e.adler=n.check=1,n.mode=tc;case tc:if(t===tn||t===ti)break t;case 13:if(n.last){d>>>=7&h,h-=7&h,n.mode=27;break}for(;h<3;){if(0===o)break t;o--,d+=i[a++]<<h,h+=8}switch(n.last=1&d,h-=1,3&(d>>>=1)){case 0:n.mode=14;break;case 1:if(t8(n),n.mode=20,t===ti){d>>>=2,h-=2;break t}break;case 2:n.mode=17;break;case 3:e.msg="invalid block type",n.mode=tf}d>>>=2,h-=2;break;case 14:for(d>>>=7&h,h-=7&h;h<32;){if(0===o)break t;o--,d+=i[a++]<<h,h+=8}if((65535&d)!=(d>>>16^65535)){e.msg="invalid stored block lengths",n.mode=tf;break}if(n.length=65535&d,d=0,h=0,n.mode=15,t===ti)break t;case 15:n.mode=16;case 16:if(f=n.length){if(f>o&&(f=o),f>l&&(f=l),0===f)break t;r.set(i.subarray(a,a+f),s),o-=f,a+=f,l-=f,s+=f,n.length-=f;break}n.mode=tc;break;case 17:for(;h<14;){if(0===o)break t;o--,d+=i[a++]<<h,h+=8}if(n.nlen=257+(31&d),d>>>=5,h-=5,n.ndist=1+(31&d),d>>>=5,h-=5,n.ncode=4+(15&d),d>>>=4,h-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=tf;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;h<3;){if(0===o)break t;o--,d+=i[a++]<<h,h+=8}n.lens[I[n.have++]]=7&d,d>>>=3,h-=3}for(;n.have<19;)n.lens[I[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,x={bits:n.lenbits},B=te(0,n.lens,0,19,n.lencode,0,n.work,x),n.lenbits=x.bits,B){e.msg="invalid code lengths set",n.mode=tf;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;m=(N=n.lencode[d&(1<<n.lenbits)-1])>>>24,g=N>>>16&255,w=65535&N,!(m<=h);){if(0===o)break t;o--,d+=i[a++]<<h,h+=8}if(w<16)d>>>=m,h-=m,n.lens[n.have++]=w;else{if(16===w){for(R=m+2;h<R;){if(0===o)break t;o--,d+=i[a++]<<h,h+=8}if(d>>>=m,h-=m,0===n.have){e.msg="invalid bit length repeat",n.mode=tf;break}v=n.lens[n.have-1],f=3+(3&d),d>>>=2,h-=2}else if(17===w){for(R=m+3;h<R;){if(0===o)break t;o--,d+=i[a++]<<h,h+=8}d>>>=m,h-=m,v=0,f=3+(7&d),d>>>=3,h-=3}else{for(R=m+7;h<R;){if(0===o)break t;o--,d+=i[a++]<<h,h+=8}d>>>=m,h-=m,v=0,f=11+(127&d),d>>>=7,h-=7}if(n.have+f>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=tf;break}for(;f--;)n.lens[n.have++]=v}}if(n.mode===tf)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=tf;break}if(n.lenbits=9,x={bits:n.lenbits},B=te(1,n.lens,0,n.nlen,n.lencode,0,n.work,x),n.lenbits=x.bits,B){e.msg="invalid literal/lengths set",n.mode=tf;break}if(n.distbits=6,n.distcode=n.distdyn,x={bits:n.distbits},B=te(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,x),n.distbits=x.bits,B){e.msg="invalid distances set",n.mode=tf;break}if(n.mode=20,t===ti)break t;case 20:n.mode=21;case 21:if(o>=6&&l>=258){e.next_out=s,e.avail_out=l,e.next_in=a,e.avail_in=o,n.hold=d,n.bits=h,eH(e,c),s=e.next_out,r=e.output,l=e.avail_out,a=e.next_in,i=e.input,o=e.avail_in,d=n.hold,h=n.bits,n.mode===tc&&(n.back=-1);break}for(n.back=0;m=(N=n.lencode[d&(1<<n.lenbits)-1])>>>24,g=N>>>16&255,w=65535&N,!(m<=h);){if(0===o)break t;o--,d+=i[a++]<<h,h+=8}if(g&&0==(240&g)){for(b=m,y=g,k=w;m=(N=n.lencode[k+((d&(1<<b+y)-1)>>b)])>>>24,g=N>>>16&255,w=65535&N,!(b+m<=h);){if(0===o)break t;o--,d+=i[a++]<<h,h+=8}d>>>=b,h-=b,n.back+=b}if(d>>>=m,h-=m,n.back+=m,n.length=w,0===g){n.mode=26;break}if(32&g){n.back=-1,n.mode=tc;break}if(64&g){e.msg="invalid literal/length code",n.mode=tf;break}n.extra=15&g,n.mode=22;case 22:if(n.extra){for(R=n.extra;h<R;){if(0===o)break t;o--,d+=i[a++]<<h,h+=8}n.length+=d&(1<<n.extra)-1,d>>>=n.extra,h-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;m=(N=n.distcode[d&(1<<n.distbits)-1])>>>24,g=N>>>16&255,w=65535&N,!(m<=h);){if(0===o)break t;o--,d+=i[a++]<<h,h+=8}if(0==(240&g)){for(b=m,y=g,k=w;m=(N=n.distcode[k+((d&(1<<b+y)-1)>>b)])>>>24,g=N>>>16&255,w=65535&N,!(b+m<=h);){if(0===o)break t;o--,d+=i[a++]<<h,h+=8}d>>>=b,h-=b,n.back+=b}if(d>>>=m,h-=m,n.back+=m,64&g){e.msg="invalid distance code",n.mode=tf;break}n.offset=w,n.extra=15&g,n.mode=24;case 24:if(n.extra){for(R=n.extra;h<R;){if(0===o)break t;o--,d+=i[a++]<<h,h+=8}n.offset+=d&(1<<n.extra)-1,d>>>=n.extra,h-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=tf;break}n.mode=25;case 25:if(0===l)break t;if(f=c-l,n.offset>f){if((f=n.offset-f)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=tf;break}f>n.wnext?(f-=n.wnext,p=n.wsize-f):p=n.wnext-f,f>n.length&&(f=n.length),_=n.window}else _=r,p=s-n.offset,f=n.length;f>l&&(f=l),l-=f,n.length-=f;do r[s++]=_[p++];while(--f);0===n.length&&(n.mode=21);break;case 26:if(0===l)break t;r[s++]=n.length,l--,n.mode=21;break;case 27:if(n.wrap){for(;h<32;){if(0===o)break t;o--,d|=i[a++]<<h,h+=8}if(c-=l,e.total_out+=c,n.total+=c,c&&(e.adler=n.check=n.flags?z(n.check,r,c,s-c):j(n.check,r,c,s-c)),c=l,(n.flags?d:tp(d))!==n.check){e.msg="incorrect data check",n.mode=tf;break}d=0,h=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;h<32;){if(0===o)break t;o--,d+=i[a++]<<h,h+=8}if(d!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=tf;break}d=0,h=0}n.mode=29;case 29:B=ta;break t;case tf:B=tl;break t;case 31:return td;default:return to}return e.next_out=s,e.avail_out=l,e.next_in=a,e.avail_in=o,n.hold=d,n.bits=h,(n.wsize||c!==e.avail_out&&n.mode<tf&&(n.mode<27||t!==tt))&&tk(e,e.output,e.next_out,c-e.avail_out),u-=e.avail_in,c-=e.avail_out,e.total_in+=u,e.total_out+=c,n.total+=c,n.wrap&&c&&(e.adler=n.check=n.flags?z(n.check,r,c,e.next_out-c):j(n.check,r,c,e.next_out-c)),e.data_type=n.bits+(n.last?64:0)+(n.mode===tc?128:0)+(20===n.mode||15===n.mode?256:0),(0===u&&0===c||t===tt)&&B===tr&&(B=th),B},inflateEnd(e){if(!e||!e.state)return to;let t=e.state;return t.window&&(t.window=null),e.state=null,tr},inflateGetHeader(e,t){if(!e||!e.state)return to;let n=e.state;return 0==(2&n.wrap)?to:(n.head=t,t.done=!1,tr)},inflateSetDictionary(e,t){let n=t.length,i,r,a;return e&&e.state?0!==(i=e.state).wrap&&11!==i.mode?to:11===i.mode&&(r=j(r=1,t,n,0))!==i.check?tl:(a=tk(e,t,n,n))?(i.mode=31,td):(i.havedict=1,tr):to},inflateInfo:"pako inflate (from Nodeca project)"},tv=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};let t1=Object.prototype.toString,{Z_NO_FLUSH:t4,Z_FINISH:t6,Z_OK:t2,Z_STREAM_END:tB,Z_NEED_DICT:t9,Z_STREAM_ERROR:tN,Z_DATA_ERROR:tT,Z_MEM_ERROR:tx}=P;function t7(e){this.options=e7({chunkSize:65536,windowBits:15,to:""},e||{});let t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new eF,this.strm.avail_out=0;let n=t3.inflateInit2(this.strm,t.windowBits);if(n!==t2||(this.header=new tv,t3.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=e5(t.dictionary):"[object ArrayBuffer]"===t1.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=t3.inflateSetDictionary(this.strm,t.dictionary))!==t2)))throw Error(W[n])}function tR(e,t){let n=new t7(t);if(n.push(e),n.err)throw n.msg||W[n.err];return n.result}t7.prototype.push=function(e,t){let n=this.strm,i=this.options.chunkSize,r=this.options.dictionary,a,s,o;if(this.ended)return!1;for(s=t===~~t?t:!0===t?t6:t4,"[object ArrayBuffer]"===t1.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){for(0===n.avail_out&&(n.output=new Uint8Array(i),n.next_out=0,n.avail_out=i),(a=t3.inflate(n,s))===t9&&r&&((a=t3.inflateSetDictionary(n,r))===t2?a=t3.inflate(n,s):a===tT&&(a=t9));n.avail_in>0&&a===tB&&n.state.wrap>0&&0!==e[n.next_in];)t3.inflateReset(n),a=t3.inflate(n,s);switch(a){case tN:case tT:case t9:case tx:return this.onEnd(a),this.ended=!0,!1}if(o=n.avail_out,n.next_out&&(0===n.avail_out||a===tB)){if("string"===this.options.to){let l=eL(n.output,n.next_out),d=n.next_out-l,h=eD(n.output,l);n.next_out=d,n.avail_out=i-d,d&&n.output.set(n.output.subarray(l,l+d),0),this.onData(h)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out))}if(a!==t2||0!==o){if(a===tB)return a=t3.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,!0;if(0===n.avail_in)break}}return!0},t7.prototype.onData=function(e){this.chunks.push(e)},t7.prototype.onEnd=function(e){e===t2&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=eR(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};let{Deflate:tI,deflate:tE,deflateRaw:tU,gzip:tS}={Deflate:eK,deflate:eX,deflateRaw:function(e,t){return(t=t||{}).raw=!0,eX(e,t)},gzip:function(e,t){return(t=t||{}).gzip=!0,eX(e,t)},constants:P},{Inflate:t5,inflate:tD,inflateRaw:tL,ungzip:tF}={Inflate:t7,inflate:tR,inflateRaw:function(e,t){return(t=t||{}).raw=!0,tR(e,t)},ungzip:tR,constants:P};var tO=tI,tC=tE,tj=tU,tA=tS,tz=t5,tW=tD,tP=tL,tM=tF,tV=P;e.Deflate=tO,e.Inflate=tz,e.constants=tV,e.default={Deflate:tO,deflate:tC,deflateRaw:tj,gzip:tA,Inflate:tz,inflate:tW,inflateRaw:tP,ungzip:tM,constants:tV},e.deflate=tC,e.deflateRaw=tj,e.gzip=tA,e.inflate=tW,e.inflateRaw=tP,e.ungzip=tM,Object.defineProperty(e,"__esModule",{value:!0})});let ew=s.slice(0,5);switch(i=s.slice(5),ew?.[0]){case 0:break;case 1:i=pako.ungzip(i),ew[0]=0}switch(HOST){case"grpc.biliapi.net":case"app.bilibili.com":class e0 extends eg{constructor(){super("google.protobuf.Any",[{no:1,name:"type_url",kind:"scalar",T:9},{no:2,name:"value",kind:"scalar",T:12}])}pack(e,t){return{typeUrl:this.typeNameToUrl(t.typeName),value:t.toBinary(e)}}unpack(e,t,n){if(!this.contains(e,t))throw Error("Cannot unpack google.protobuf.Any with typeUrl '"+e.typeUrl+"' as "+t.typeName+".");return t.fromBinary(e.value,n)}contains(e,t){if(!e.typeUrl.length)return!1;let n;return("string"==typeof t?t:t.typeName)===this.typeUrlToName(e.typeUrl)}internalJsonWrite(e,t){if(""===e.typeUrl)return{};let n=this.typeUrlToName(e.typeUrl),i=es(t),r=i.typeRegistry?.find(e=>e.typeName===n);if(!r)throw new globalThis.Error("Unable to convert google.protobuf.Any with typeUrl '"+e.typeUrl+"' to JSON. The specified type "+n+" is not available in the type registry.");let a=r.fromBinary(e.value,{readUnknownField:!1}),s=r.internalJsonWrite(a,i);return(n.startsWith("google.protobuf.")||!B(s))&&(s={value:s}),s["@type"]=e.typeUrl,s}internalJsonRead(e,t,n){if(!B(e))throw new globalThis.Error("Unable to parse google.protobuf.Any from JSON "+v(e)+".");if("string"!=typeof e["@type"]||""==e["@type"])return this.create();let i=this.typeUrlToName(e["@type"]),r=t?.typeRegistry?.find(e=>e.typeName==i);if(!r)throw new globalThis.Error("Unable to parse google.protobuf.Any from JSON. The specified type "+i+" is not available in the type registry.");let a;if(i.startsWith("google.protobuf.")&&e.hasOwnProperty("value"))a=r.fromJson(e.value,t);else{let s=Object.assign({},e);delete s["@type"],a=r.fromJson(s,t)}return void 0===n&&(n=this.create()),n.typeUrl=e["@type"],n.value=r.toBinary(a),n}typeNameToUrl(e){if(!e.length)throw Error("invalid type name: "+e);return"type.googleapis.com/"+e}typeUrlToName(e){if(!e.length)throw Error("invalid type url: "+e);let t=e.lastIndexOf("/"),n=t>0?e.substring(t+1):e;if(!n.length)throw Error("invalid type url: "+e);return n}create(e){let t={typeUrl:"",value:new Uint8Array(0)};return globalThis.Object.defineProperty(t,u,{enumerable:!1,value:this}),void 0!==e&&en(this,t,e),t}internalBinaryRead(e,t,n,i){let r=i??this.create(),a=e.pos+t;for(;e.pos<a;){let[s,o]=e.tag();switch(s){case 1:r.typeUrl=e.string();break;case 2:r.value=e.bytes();break;default:let l=n.readUnknownField;if("throw"===l)throw new globalThis.Error(`Unknown field ${s}(wire type ${o})for ${this.typeName}`);let h=e.skip(o);!1!==l&&(!0===l?d.onRead:l)(this.typeName,r,s,o,h)}}return r}internalBinaryWrite(e,t,n){""!==e.typeUrl&&t.tag(1,h.LengthDelimited).string(e.typeUrl),e.value.length&&t.tag(2,h.LengthDelimited).bytes(e.value);let i=n.writeUnknownFields;return!1!==i&&(!0==i?d.onWrite:i)(this.typeName,e,t),t}}let eb=new e0;class ey extends eg{constructor(){super("CM",[{no:1,name:"source_content",kind:"message",T:()=>eb}])}create(e){let t={};return globalThis.Object.defineProperty(t,u,{enumerable:!1,value:this}),void 0!==e&&en(this,t,e),t}internalBinaryRead(e,t,n,i){let r=i??this.create(),a=e.pos+t;for(;e.pos<a;){let[s,o]=e.tag();if(1===s)r.sourceContent=eb.internalBinaryRead(e,e.uint32(),n,r.sourceContent);else{let l=n.readUnknownField;if("throw"===l)throw new globalThis.Error(`Unknown field ${s}(wire type ${o})for ${this.typeName}`);let h=e.skip(o);!1!==l&&(!0===l?d.onRead:l)(this.typeName,r,s,o,h)}}return r}internalBinaryWrite(e,t,n){e.sourceContent&&eb.internalBinaryWrite(e.sourceContent,t.tag(1,h.LengthDelimited).fork(),n).join();let i=n.writeUnknownFields;return!1!==i&&(!0==i?d.onWrite:i)(this.typeName,e,t),t}}let e8=new ey;switch(PATHs?.[0]){case"bilibili.app.playurl.v1.PlayURL":if(PATHs?.[1]==="PlayView"){class ek extends eg{constructor(){super("PlayViewReply",[{no:5,name:"play_arc",kind:"message",T:()=>e1}])}create(e){let t={};return globalThis.Object.defineProperty(t,u,{enumerable:!1,value:this}),void 0!==e&&en(this,t,e),t}internalBinaryRead(e,t,n,i){let r=i??this.create(),a=e.pos+t;for(;e.pos<a;){let[s,o]=e.tag();if(5===s)r.playArc=e1.internalBinaryRead(e,e.uint32(),n,r.playArc);else{let l=n.readUnknownField;if("throw"===l)throw new globalThis.Error(`Unknown field ${s}(wire type ${o})for ${this.typeName}`);let h=e.skip(o);!1!==l&&(!0===l?d.onRead:l)(this.typeName,r,s,o,h)}}return r}internalBinaryWrite(e,t,n){e.playArc&&e1.internalBinaryWrite(e.playArc,t.tag(5,h.LengthDelimited).fork(),n).join();let i=n.writeUnknownFields;return!1!==i&&(!0==i?d.onWrite:i)(this.typeName,e,t),t}}let e3=new ek;class ev extends eg{constructor(){super("PlayArcConf",[{no:1,name:"background_play_conf",kind:"message",T:()=>e6}])}create(e){let t={};return globalThis.Object.defineProperty(t,u,{enumerable:!1,value:this}),void 0!==e&&en(this,t,e),t}internalBinaryRead(e,t,n,i){let r=i??this.create(),a=e.pos+t;for(;e.pos<a;){let[s,o]=e.tag();if(1===s)r.backgroundPlayConf=e6.internalBinaryRead(e,e.uint32(),n,r.backgroundPlayConf);else{let l=n.readUnknownField;if("throw"===l)throw new globalThis.Error(`Unknown field ${s}(wire type ${o})for ${this.typeName}`);let h=e.skip(o);!1!==l&&(!0===l?d.onRead:l)(this.typeName,r,s,o,h)}}return r}internalBinaryWrite(e,t,n){e.backgroundPlayConf&&e6.internalBinaryWrite(e.backgroundPlayConf,t.tag(1,h.LengthDelimited).fork(),n).join();let i=n.writeUnknownFields;return!1!==i&&(!0==i?d.onWrite:i)(this.typeName,e,t),t}}let e1=new ev;class e4 extends eg{constructor(){super("ArcConf",[{no:1,name:"is_support",kind:"scalar",T:8},{no:2,name:"disabled",kind:"scalar",T:8},{no:3,name:"extra_content",kind:"message",T:()=>eB}])}create(e){let t={isSupport:!1,disabled:!1};return globalThis.Object.defineProperty(t,u,{enumerable:!1,value:this}),void 0!==e&&en(this,t,e),t}internalBinaryRead(e,t,n,i){let r=i??this.create(),a=e.pos+t;for(;e.pos<a;){let[s,o]=e.tag();switch(s){case 1:r.isSupport=e.bool();break;case 2:r.disabled=e.bool();break;case 3:r.extraContent=eB.internalBinaryRead(e,e.uint32(),n,r.extraContent);break;default:let l=n.readUnknownField;if("throw"===l)throw new globalThis.Error(`Unknown field ${s}(wire type ${o})for ${this.typeName}`);let h=e.skip(o);!1!==l&&(!0===l?d.onRead:l)(this.typeName,r,s,o,h)}}return r}internalBinaryWrite(e,t,n){!1!==e.isSupport&&t.tag(1,h.Varint).bool(e.isSupport),!1!==e.disabled&&t.tag(2,h.Varint).bool(e.disabled),e.extraContent&&eB.internalBinaryWrite(e.extraContent,t.tag(3,h.LengthDelimited).fork(),n).join();let i=n.writeUnknownFields;return!1!==i&&(!0==i?d.onWrite:i)(this.typeName,e,t),t}}let e6=new e4;class e2 extends eg{constructor(){super("ExtraContent",[{no:1,name:"disabled_reason",kind:"scalar",T:9},{no:2,name:"disabled_code",kind:"scalar",T:3,L:0}])}create(e){let t={disabledReason:"",disabledCode:0n};return globalThis.Object.defineProperty(t,u,{enumerable:!1,value:this}),void 0!==e&&en(this,t,e),t}internalBinaryRead(e,t,n,i){let r=i??this.create(),a=e.pos+t;for(;e.pos<a;){let[s,o]=e.tag();switch(s){case 1:r.disabledReason=e.string();break;case 2:r.disabledCode=e.int64().toBigInt();break;default:let l=n.readUnknownField;if("throw"===l)throw new globalThis.Error(`Unknown field ${s}(wire type ${o})for ${this.typeName}`);let h=e.skip(o);!1!==l&&(!0===l?d.onRead:l)(this.typeName,r,s,o,h)}}return r}internalBinaryWrite(e,t,n){""!==e.disabledReason&&t.tag(1,h.LengthDelimited).string(e.disabledReason),0n!==e.disabledCode&&t.tag(2,h.Varint).int64(e.disabledCode);let i=n.writeUnknownFields;return!1!==i&&(!0==i?d.onWrite:i)(this.typeName,e,t),t}}let eB=new e2,e9=e3.fromBinary(i),eN=e9.playArc?.backgroundPlayConf;eN&&(!eN.isSupport||eN.disabled)?($.log(`🎉 ${$.name}`,"后台播放限制去除"),e9.playArc.backgroundPlayConf.isSupport=!0,e9.playArc.backgroundPlayConf.disabled=!1,e9.playArc.backgroundPlayConf.extraContent=null):$.log(`🚧 ${$.name}`,"无后台播放限制"),i=e3.toBinary(e9)}break;case"bilibili.app.dynamic.v2.Dynamic":!function(e){e[e.dyn_none=0]="dyn_none",e[e.ad=15]="ad"}(l||(l={}));class eT extends eg{constructor(){super("DynAllReply",[{no:1,name:"dynamic_list",kind:"message",T:()=>eE},{no:2,name:"up_list",kind:"message",T:()=>eS},{no:3,name:"topic_list",kind:"message",T:()=>eD}])}create(e){let t={};return globalThis.Object.defineProperty(t,u,{enumerable:!1,value:this}),void 0!==e&&en(this,t,e),t}internalBinaryRead(e,t,n,i){let r=i??this.create(),a=e.pos+t;for(;e.pos<a;){let[s,o]=e.tag();switch(s){case 1:r.dynamicList=eE.internalBinaryRead(e,e.uint32(),n,r.dynamicList);break;case 2:r.upList=eS.internalBinaryRead(e,e.uint32(),n,r.upList);break;case 3:r.topicList=eD.internalBinaryRead(e,e.uint32(),n,r.topicList);break;default:let l=n.readUnknownField;if("throw"===l)throw new globalThis.Error(`Unknown field ${s}(wire type ${o})for ${this.typeName}`);let h=e.skip(o);!1!==l&&(!0===l?d.onRead:l)(this.typeName,r,s,o,h)}}return r}internalBinaryWrite(e,t,n){e.dynamicList&&eE.internalBinaryWrite(e.dynamicList,t.tag(1,h.LengthDelimited).fork(),n).join(),e.upList&&eS.internalBinaryWrite(e.upList,t.tag(2,h.LengthDelimited).fork(),n).join(),e.topicList&&eD.internalBinaryWrite(e.topicList,t.tag(3,h.LengthDelimited).fork(),n).join();let i=n.writeUnknownFields;return!1!==i&&(!0==i?d.onWrite:i)(this.typeName,e,t),t}}let ex=new eT;class e7 extends eg{constructor(){super("DynVideoReply",[{no:2,name:"video_up_list",kind:"message",T:()=>eS}])}create(e){let t={};return globalThis.Object.defineProperty(t,u,{enumerable:!1,value:this}),void 0!==e&&en(this,t,e),t}internalBinaryRead(e,t,n,i){let r=i??this.create(),a=e.pos+t;for(;e.pos<a;){let[s,o]=e.tag();if(2===s)r.videoUpList=eS.internalBinaryRead(e,e.uint32(),n,r.videoUpList);else{let l=n.readUnknownField;if("throw"===l)throw new globalThis.Error(`Unknown field ${s}(wire type ${o})for ${this.typeName}`);let h=e.skip(o);!1!==l&&(!0===l?d.onRead:l)(this.typeName,r,s,o,h)}}return r}internalBinaryWrite(e,t,n){e.videoUpList&&eS.internalBinaryWrite(e.videoUpList,t.tag(2,h.LengthDelimited).fork(),n).join();let i=n.writeUnknownFields;return!1!==i&&(!0==i?d.onWrite:i)(this.typeName,e,t),t}}let eR=new e7;class eI extends eg{constructor(){super("DynamicList",[{no:1,name:"list",kind:"message",repeat:1,T:()=>eF}])}create(e){let t={list:[]};return globalThis.Object.defineProperty(t,u,{enumerable:!1,value:this}),void 0!==e&&en(this,t,e),t}internalBinaryRead(e,t,n,i){let r=i??this.create(),a=e.pos+t;for(;e.pos<a;){let[s,o]=e.tag();if(1===s)r.list.push(eF.internalBinaryRead(e,e.uint32(),n));else{let l=n.readUnknownField;if("throw"===l)throw new globalThis.Error(`Unknown field ${s}(wire type ${o})for ${this.typeName}`);let h=e.skip(o);!1!==l&&(!0===l?d.onRead:l)(this.typeName,r,s,o,h)}}return r}internalBinaryWrite(e,t,n){for(let i=0;i<e.list.length;i++)eF.internalBinaryWrite(e.list[i],t.tag(1,h.LengthDelimited).fork(),n).join();let r=n.writeUnknownFields;return!1!==r&&(!0==r?d.onWrite:r)(this.typeName,e,t),t}}let eE=new eI;class eU extends eg{constructor(){super("CardVideoUpList",[{no:1,name:"title",kind:"scalar",T:9}])}create(e){let t={title:""};return globalThis.Object.defineProperty(t,u,{enumerable:!1,value:this}),void 0!==e&&en(this,t,e),t}internalBinaryRead(e,t,n,i){let r=i??this.create(),a=e.pos+t;for(;e.pos<a;){let[s,o]=e.tag();if(1===s)r.title=e.string();else{let l=n.readUnknownField;if("throw"===l)throw new globalThis.Error(`Unknown field ${s}(wire type ${o})for ${this.typeName}`);let h=e.skip(o);!1!==l&&(!0===l?d.onRead:l)(this.typeName,r,s,o,h)}}return r}internalBinaryWrite(e,t,n){""!==e.title&&t.tag(1,h.LengthDelimited).string(e.title);let i=n.writeUnknownFields;return!1!==i&&(!0==i?d.onWrite:i)(this.typeName,e,t),t}}let eS=new eU;class e5 extends eg{constructor(){super("TopicList",[{no:1,name:"title",kind:"scalar",T:9}])}create(e){let t={title:""};return globalThis.Object.defineProperty(t,u,{enumerable:!1,value:this}),void 0!==e&&en(this,t,e),t}internalBinaryRead(e,t,n,i){let r=i??this.create(),a=e.pos+t;for(;e.pos<a;){let[s,o]=e.tag();if(1===s)r.title=e.string();else{let l=n.readUnknownField;if("throw"===l)throw new globalThis.Error(`Unknown field ${s}(wire type ${o})for ${this.typeName}`);let h=e.skip(o);!1!==l&&(!0===l?d.onRead:l)(this.typeName,r,s,o,h)}}return r}internalBinaryWrite(e,t,n){""!==e.title&&t.tag(1,h.LengthDelimited).string(e.title);let i=n.writeUnknownFields;return!1!==i&&(!0==i?d.onWrite:i)(this.typeName,e,t),t}}let eD=new e5;class eL extends eg{constructor(){super("DynamicItem",[{no:1,name:"card_type",kind:"enum",T:()=>["DynamicType",l]}])}create(e){let t={cardType:0};return globalThis.Object.defineProperty(t,u,{enumerable:!1,value:this}),void 0!==e&&en(this,t,e),t}internalBinaryRead(e,t,n,i){let r=i??this.create(),a=e.pos+t;for(;e.pos<a;){let[s,o]=e.tag();if(1===s)r.cardType=e.int32();else{let l=n.readUnknownField;if("throw"===l)throw new globalThis.Error(`Unknown field ${s}(wire type ${o})for ${this.typeName}`);let h=e.skip(o);!1!==l&&(!0===l?d.onRead:l)(this.typeName,r,s,o,h)}}return r}internalBinaryWrite(e,t,n){0!==e.cardType&&t.tag(1,h.Varint).int32(e.cardType);let i=n.writeUnknownFields;return!1!==i&&(!0==i?d.onWrite:i)(this.typeName,e,t),t}}let eF=new eL;switch(PATHs?.[1]){case"DynAll":switch(data=ex.fromBinary(i),e?.Detail?.Hot_topics){case!0:default:data.topicList&&(data.topicList=null,$.log(`🎉 ${$.name}`,"动态综合页热门话题去除"));break;case!1:$.log(`🚧 ${$.name}`,"用户设置动态综合页热门话题不去除")}switch(e?.Detail?.Most_visited){case!0:default:data.upList&&(data.upList=null,$.log(`🎉 ${$.name}`,"动态综合页最常访问去除"));break;case!1:$.log(`🚧 ${$.name}`,"用户设置动态综合页最常访问不去除")}switch(e?.Detail?.Dynamic_adcard){case!0:default:data.dynamicList?.list?.length&&(data.dynamicList.list=data.dynamicList.list.filter(e=>15!==e.cardType||($.log(`🎉 ${$.name}`,"动态综合页广告动态去除"),!1)));break;case!1:$.log(`🚧 ${$.name}`,"用户设置动态综合页广告动态不去除")}i=ex.toBinary(data);break;case"DynVideo":switch(data=eR.fromBinary(i),e?.Detail?.Most_visited){case!0:default:data.videoUpList&&(data.videoUpList=null,$.log(`🎉 ${$.name}`,"动态视频页最常访问去除"));break;case!1:$.log(`🚧 ${$.name}`,"用户设置动态视频页最常访问不去除")}i=eR.toBinary(data)}break;case"bilibili.app.view.v1.View":switch(PATHs?.[1]){case"View":class eO extends eg{constructor(){super("ViewReply",[{no:6,name:"t_icon",kind:"map",K:9,V:{kind:"message",T:()=>eM}},{no:10,name:"relates",kind:"message",repeat:1,T:()=>eZ},{no:30,name:"cms",kind:"message",repeat:1,T:()=>e8},{no:31,name:"cm_config",kind:"message",T:()=>eA},{no:41,name:"cm_ipad",kind:"message",T:()=>eW}])}create(e){let t={tIcon:{},relates:[],cms:[]};return globalThis.Object.defineProperty(t,u,{enumerable:!1,value:this}),void 0!==e&&en(this,t,e),t}internalBinaryRead(e,t,n,i){let r=i??this.create(),a=e.pos+t;for(;e.pos<a;){let[s,o]=e.tag();switch(s){case 6:this.binaryReadMap6(r.tIcon,e,n);break;case 10:r.relates.push(eZ.internalBinaryRead(e,e.uint32(),n));break;case 30:r.cms.push(e8.internalBinaryRead(e,e.uint32(),n));break;case 31:r.cmConfig=eA.internalBinaryRead(e,e.uint32(),n,r.cmConfig);break;case 41:r.cmIpad=eW.internalBinaryRead(e,e.uint32(),n,r.cmIpad);break;default:let l=n.readUnknownField;if("throw"===l)throw new globalThis.Error(`Unknown field ${s}(wire type ${o})for ${this.typeName}`);let h=e.skip(o);!1!==l&&(!0===l?d.onRead:l)(this.typeName,r,s,o,h)}}return r}binaryReadMap6(e,t,n){let i=t.uint32(),r=t.pos+i,a,s;for(;t.pos<r;){let[o,l]=t.tag();switch(o){case 1:a=t.string();break;case 2:s=eM.internalBinaryRead(t,t.uint32(),n);break;default:throw new globalThis.Error("unknown map entry field for field ViewReply.t_icon")}}e[a??""]=s??eM.create()}internalBinaryWrite(e,t,n){for(let i of Object.keys(e.tIcon))t.tag(6,h.LengthDelimited).fork().tag(1,h.LengthDelimited).string(i),t.tag(2,h.LengthDelimited).fork(),eM.internalBinaryWrite(e.tIcon[i],t,n),t.join().join();for(let r=0;r<e.relates.length;r++)eZ.internalBinaryWrite(e.relates[r],t.tag(10,h.LengthDelimited).fork(),n).join();for(let a=0;a<e.cms.length;a++)e8.internalBinaryWrite(e.cms[a],t.tag(30,h.LengthDelimited).fork(),n).join();e.cmConfig&&eA.internalBinaryWrite(e.cmConfig,t.tag(31,h.LengthDelimited).fork(),n).join(),e.cmIpad&&eW.internalBinaryWrite(e.cmIpad,t.tag(41,h.LengthDelimited).fork(),n).join();let s=n.writeUnknownFields;return!1!==s&&(!0==s?d.onWrite:s)(this.typeName,e,t),t}}let eC=new eO;class ej extends eg{constructor(){super("CMConfig",[{no:1,name:"ads_control",kind:"message",T:()=>eb}])}create(e){let t={};return globalThis.Object.defineProperty(t,u,{enumerable:!1,value:this}),void 0!==e&&en(this,t,e),t}internalBinaryRead(e,t,n,i){let r=i??this.create(),a=e.pos+t;for(;e.pos<a;){let[s,o]=e.tag();if(1===s)r.adsControl=eb.internalBinaryRead(e,e.uint32(),n,r.adsControl);else{let l=n.readUnknownField;if("throw"===l)throw new globalThis.Error(`Unknown field ${s}(wire type ${o})for ${this.typeName}`);let h=e.skip(o);!1!==l&&(!0===l?d.onRead:l)(this.typeName,r,s,o,h)}}return r}internalBinaryWrite(e,t,n){e.adsControl&&eb.internalBinaryWrite(e.adsControl,t.tag(1,h.LengthDelimited).fork(),n).join();let i=n.writeUnknownFields;return!1!==i&&(!0==i?d.onWrite:i)(this.typeName,e,t),t}}let eA=new ej;class ez extends eg{constructor(){super("CmIpad",[{no:5,name:"aid",kind:"scalar",T:3,L:0}])}create(e){let t={aid:0n};return globalThis.Object.defineProperty(t,u,{enumerable:!1,value:this}),void 0!==e&&en(this,t,e),t}internalBinaryRead(e,t,n,i){let r=i??this.create(),a=e.pos+t;for(;e.pos<a;){let[s,o]=e.tag();if(5===s)r.aid=e.int64().toBigInt();else{let l=n.readUnknownField;if("throw"===l)throw new globalThis.Error(`Unknown field ${s}(wire type ${o})for ${this.typeName}`);let h=e.skip(o);!1!==l&&(!0===l?d.onRead:l)(this.typeName,r,s,o,h)}}return r}internalBinaryWrite(e,t,n){0n!==e.aid&&t.tag(5,h.Varint).int64(e.aid);let i=n.writeUnknownFields;return!1!==i&&(!0==i?d.onWrite:i)(this.typeName,e,t),t}}let eW=new ez;class eP extends eg{constructor(){super("TIcon",[{no:1,name:"icon",kind:"scalar",T:9}])}create(e){let t={icon:""};return globalThis.Object.defineProperty(t,u,{enumerable:!1,value:this}),void 0!==e&&en(this,t,e),t}internalBinaryRead(e,t,n,i){let r=i??this.create(),a=e.pos+t;for(;e.pos<a;){let[s,o]=e.tag();if(1===s)r.icon=e.string();else{let l=n.readUnknownField;if("throw"===l)throw new globalThis.Error(`Unknown field ${s}(wire type ${o})for ${this.typeName}`);let h=e.skip(o);!1!==l&&(!0===l?d.onRead:l)(this.typeName,r,s,o,h)}}return r}internalBinaryWrite(e,t,n){""!==e.icon&&t.tag(1,h.LengthDelimited).string(e.icon);let i=n.writeUnknownFields;return!1!==i&&(!0==i?d.onWrite:i)(this.typeName,e,t),t}}let eM=new eP;class eV extends eg{constructor(){super("Relate",[{no:28,name:"cm",kind:"message",T:()=>e8}])}create(e){let t={};return globalThis.Object.defineProperty(t,u,{enumerable:!1,value:this}),void 0!==e&&en(this,t,e),t}internalBinaryRead(e,t,n,i){let r=i??this.create(),a=e.pos+t;for(;e.pos<a;){let[s,o]=e.tag();if(28===s)r.cm=e8.internalBinaryRead(e,e.uint32(),n,r.cm);else{let l=n.readUnknownField;if("throw"===l)throw new globalThis.Error(`Unknown field ${s}(wire type ${o})for ${this.typeName}`);let h=e.skip(o);!1!==l&&(!0===l?d.onRead:l)(this.typeName,r,s,o,h)}}return r}internalBinaryWrite(e,t,n){e.cm&&e8.internalBinaryWrite(e.cm,t.tag(28,h.LengthDelimited).fork(),n).join();let i=n.writeUnknownFields;return!1!==i&&(!0==i?d.onWrite:i)(this.typeName,e,t),t}}let eZ=new eV;switch(e?.Detail?.view){case!0:default:let eK=eC.fromBinary(i);for(let eX in eK.cms?.length&&(eK.cms=[],$.log(`🎉 ${$.name}`,"播放页广告卡片去除")),eK.relates?.length&&(eK.relates=eK.relates.filter(e=>!e.cm||($.log(`🎉 ${$.name}`,"播放页关联推荐广告去除"),!1))),(eK.cmConfig||eK.cmIpad)&&(delete eK.cmConfig,delete eK.cmIpad,$.log(`🎉 ${$.name}`,"播放页定制tab去除")),eK.tIcon)null===eK.tIcon[eX]&&delete eK.tIcon[eX];i=eC.toBinary(eK);break;case!1:$.log(`🚧 ${$.name}`,"用户设置播放页广告不去除")}break;case"TFInfo":class eH extends eg{constructor(){super("TFInfoReply",[{no:1,name:"tipsId",kind:"scalar",T:3,L:0},{no:2,name:"tfToast",kind:"message",T:()=>eY},{no:3,name:"tfPanelCustomized",kind:"message",T:()=>eQ}])}create(e){let t={tipsId:0n};return globalThis.Object.defineProperty(t,u,{enumerable:!1,value:this}),void 0!==e&&en(this,t,e),t}internalBinaryRead(e,t,n,i){let r=i??this.create(),a=e.pos+t;for(;e.pos<a;){let[s,o]=e.tag();switch(s){case 1:r.tipsId=e.int64().toBigInt();break;case 2:r.tfToast=eY.internalBinaryRead(e,e.uint32(),n,r.tfToast);break;case 3:r.tfPanelCustomized=eQ.internalBinaryRead(e,e.uint32(),n,r.tfPanelCustomized);break;default:let l=n.readUnknownField;if("throw"===l)throw new globalThis.Error(`Unknown field ${s}(wire type ${o})for ${this.typeName}`);let h=e.skip(o);!1!==l&&(!0===l?d.onRead:l)(this.typeName,r,s,o,h)}}return r}internalBinaryWrite(e,t,n){0n!==e.tipsId&&t.tag(1,h.Varint).int64(e.tipsId),e.tfToast&&eY.internalBinaryWrite(e.tfToast,t.tag(2,h.LengthDelimited).fork(),n).join(),e.tfPanelCustomized&&eQ.internalBinaryWrite(e.tfPanelCustomized,t.tag(3,h.LengthDelimited).fork(),n).join();let i=n.writeUnknownFields;return!1!==i&&(!0==i?d.onWrite:i)(this.typeName,e,t),t}}let eJ=new eH;class eG extends eg{constructor(){super("TFToast",[{no:1,name:"btnText",kind:"scalar",T:9}])}create(e){let t={btnText:""};return globalThis.Object.defineProperty(t,u,{enumerable:!1,value:this}),void 0!==e&&en(this,t,e),t}internalBinaryRead(e,t,n,i){let r=i??this.create(),a=e.pos+t;for(;e.pos<a;){let[s,o]=e.tag();if(1===s)r.btnText=e.string();else{let l=n.readUnknownField;if("throw"===l)throw new globalThis.Error(`Unknown field ${s}(wire type ${o})for ${this.typeName}`);let h=e.skip(o);!1!==l&&(!0===l?d.onRead:l)(this.typeName,r,s,o,h)}}return r}internalBinaryWrite(e,t,n){""!==e.btnText&&t.tag(1,h.LengthDelimited).string(e.btnText);let i=n.writeUnknownFields;return!1!==i&&(!0==i?d.onWrite:i)(this.typeName,e,t),t}}let eY=new eG;class eq extends eg{constructor(){super("TFPanelCustomized",[{no:2,name:"rightBtnText",kind:"scalar",T:9}])}create(e){let t={rightBtnText:""};return globalThis.Object.defineProperty(t,u,{enumerable:!1,value:this}),void 0!==e&&en(this,t,e),t}internalBinaryRead(e,t,n,i){let r=i??this.create(),a=e.pos+t;for(;e.pos<a;){let[s,o]=e.tag();if(2===s)r.rightBtnText=e.string();else{let l=n.readUnknownField;if("throw"===l)throw new globalThis.Error(`Unknown field ${s}(wire type ${o})for ${this.typeName}`);let h=e.skip(o);!1!==l&&(!0===l?d.onRead:l)(this.typeName,r,s,o,h)}}return r}internalBinaryWrite(e,t,n){""!==e.rightBtnText&&t.tag(2,h.LengthDelimited).string(e.rightBtnText);let i=n.writeUnknownFields;return!1!==i&&(!0==i?d.onWrite:i)(this.typeName,e,t),t}}let eQ=new eq,te=eJ.fromBinary(i);$.log(te.tipsId),te?.tipsId&&(delete te.tfToast,delete te.tfPanelCustomized,$.log(`🎉 ${$.name}`,"播放页办卡免流广告去除")),i=eJ.toBinary(te)}break;case"bilibili.app.viewunite.v1.View":if(PATHs?.[1]==="View"){class tt extends eg{constructor(){super("bilibili.app.viewunite.v1.ViewReply",[{no:5,name:"tab",kind:"message",T:()=>tr},{no:7,name:"cm",kind:"message",T:()=>t$}])}create(e){let t={};return globalThis.Object.defineProperty(t,u,{enumerable:!1,value:this}),void 0!==e&&en(this,t,e),t}internalBinaryRead(e,t,n,i){let r=i??this.create(),a=e.pos+t;for(;e.pos<a;){let[s,o]=e.tag();switch(s){case 5:r.tab=tr.internalBinaryRead(e,e.uint32(),n,r.tab);break;case 7:r.cm=t$.internalBinaryRead(e,e.uint32(),n,r.cm);break;default:let l=n.readUnknownField;if("throw"===l)throw new globalThis.Error(`Unknown field ${s}(wire type ${o})for ${this.typeName}`);let h=e.skip(o);!1!==l&&(!0===l?d.onRead:l)(this.typeName,r,s,o,h)}}return r}internalBinaryWrite(e,t,n){e.tab&&tr.internalBinaryWrite(e.tab,t.tag(5,h.LengthDelimited).fork(),n).join(),e.cm&&t$.internalBinaryWrite(e.cm,t.tag(7,h.LengthDelimited).fork(),n).join();let i=n.writeUnknownFields;return!1!==i&&(!0==i?d.onWrite:i)(this.typeName,e,t),t}}let tn=new tt;class ti extends eg{constructor(){super("bilibili.app.viewunite.v1.Tab",[{no:1,name:"tab_module",kind:"message",repeat:1,T:()=>ts}])}create(e){let t={tabModule:[]};return globalThis.Object.defineProperty(t,u,{enumerable:!1,value:this}),void 0!==e&&en(this,t,e),t}internalBinaryRead(e,t,n,i){let r=i??this.create(),a=e.pos+t;for(;e.pos<a;){let[s,o]=e.tag();if(1===s)r.tabModule.push(ts.internalBinaryRead(e,e.uint32(),n));else{let l=n.readUnknownField;if("throw"===l)throw new globalThis.Error(`Unknown field ${s}(wire type ${o})for ${this.typeName}`);let h=e.skip(o);!1!==l&&(!0===l?d.onRead:l)(this.typeName,r,s,o,h)}}return r}internalBinaryWrite(e,t,n){for(let i=0;i<e.tabModule.length;i++)ts.internalBinaryWrite(e.tabModule[i],t.tag(1,h.LengthDelimited).fork(),n).join();let r=n.writeUnknownFields;return!1!==r&&(!0==r?d.onWrite:r)(this.typeName,e,t),t}}let tr=new ti;class ta extends eg{constructor(){super("bilibili.app.viewunite.v1.TabModule",[{no:2,name:"introduction",kind:"message",oneof:"tab",T:()=>tl}])}create(e){let t={tab:{oneofKind:void 0}};return globalThis.Object.defineProperty(t,u,{enumerable:!1,value:this}),void 0!==e&&en(this,t,e),t}internalBinaryRead(e,t,n,i){let r=i??this.create(),a=e.pos+t;for(;e.pos<a;){let[s,o]=e.tag();if(2===s)r.tab={oneofKind:"introduction",introduction:tl.internalBinaryRead(e,e.uint32(),n,r.tab.introduction)};else{let l=n.readUnknownField;if("throw"===l)throw new globalThis.Error(`Unknown field ${s}(wire type ${o})for ${this.typeName}`);let h=e.skip(o);!1!==l&&(!0===l?d.onRead:l)(this.typeName,r,s,o,h)}}return r}internalBinaryWrite(e,t,n){"introduction"===e.tab.oneofKind&&tl.internalBinaryWrite(e.tab.introduction,t.tag(2,h.LengthDelimited).fork(),n).join();let i=n.writeUnknownFields;return!1!==i&&(!0==i?d.onWrite:i)(this.typeName,e,t),t}}let ts=new ta;class to extends eg{constructor(){super("bilibili.app.viewunite.v1.IntroductionTab",[{no:2,name:"modules",kind:"message",repeat:1,T:()=>th}])}create(e){let t={modules:[]};return globalThis.Object.defineProperty(t,u,{enumerable:!1,value:this}),void 0!==e&&en(this,t,e),t}internalBinaryRead(e,t,n,i){let r=i??this.create(),a=e.pos+t;for(;e.pos<a;){let[s,o]=e.tag();if(2===s)r.modules.push(th.internalBinaryRead(e,e.uint32(),n));else{let l=n.readUnknownField;if("throw"===l)throw new globalThis.Error(`Unknown field ${s}(wire type ${o})for ${this.typeName}`);let h=e.skip(o);!1!==l&&(!0===l?d.onRead:l)(this.typeName,r,s,o,h)}}return r}internalBinaryWrite(e,t,n){for(let i=0;i<e.modules.length;i++)th.internalBinaryWrite(e.modules[i],t.tag(2,h.LengthDelimited).fork(),n).join();let r=n.writeUnknownFields;return!1!==r&&(!0==r?d.onWrite:r)(this.typeName,e,t),t}}let tl=new to;class td extends eg{constructor(){super("bilibili.app.viewunite.v1.Module",[{no:1,name:"type",kind:"scalar",T:5},{no:22,name:"relates",kind:"message",oneof:"data",T:()=>tc}])}create(e){let t={type:0,data:{oneofKind:void 0}};return globalThis.Object.defineProperty(t,u,{enumerable:!1,value:this}),void 0!==e&&en(this,t,e),t}internalBinaryRead(e,t,n,i){let r=i??this.create(),a=e.pos+t;for(;e.pos<a;){let[s,o]=e.tag();switch(s){case 1:r.type=e.int32();break;case 22:r.data={oneofKind:"relates",relates:tc.internalBinaryRead(e,e.uint32(),n,r.data.relates)};break;default:let l=n.readUnknownField;if("throw"===l)throw new globalThis.Error(`Unknown field ${s}(wire type ${o})for ${this.typeName}`);let h=e.skip(o);!1!==l&&(!0===l?d.onRead:l)(this.typeName,r,s,o,h)}}return r}internalBinaryWrite(e,t,n){0!==e.type&&t.tag(1,h.Varint).int32(e.type),"relates"===e.data.oneofKind&&tc.internalBinaryWrite(e.data.relates,t.tag(22,h.LengthDelimited).fork(),n).join();let i=n.writeUnknownFields;return!1!==i&&(!0==i?d.onWrite:i)(this.typeName,e,t),t}}let th=new td;class tu extends eg{constructor(){super("bilibili.app.viewunite.v1.Relates",[{no:1,name:"cards",kind:"message",repeat:1,T:()=>tp}])}create(e){let t={cards:[]};return globalThis.Object.defineProperty(t,u,{enumerable:!1,value:this}),void 0!==e&&en(this,t,e),t}internalBinaryRead(e,t,n,i){let r=i??this.create(),a=e.pos+t;for(;e.pos<a;){let[s,o]=e.tag();if(1===s)r.cards.push(tp.internalBinaryRead(e,e.uint32(),n));else{let l=n.readUnknownField;if("throw"===l)throw new globalThis.Error(`Unknown field ${s}(wire type ${o})for ${this.typeName}`);let h=e.skip(o);!1!==l&&(!0===l?d.onRead:l)(this.typeName,r,s,o,h)}}return r}internalBinaryWrite(e,t,n){for(let i=0;i<e.cards.length;i++)tp.internalBinaryWrite(e.cards[i],t.tag(1,h.LengthDelimited).fork(),n).join();let r=n.writeUnknownFields;return!1!==r&&(!0==r?d.onWrite:r)(this.typeName,e,t),t}}let tc=new tu;class tf extends eg{constructor(){super("bilibili.app.viewunite.v1.RelateCard",[{no:1,name:"relate_card_type",kind:"scalar",T:5}])}create(e){let t={relateCardType:0};return globalThis.Object.defineProperty(t,u,{enumerable:!1,value:this}),void 0!==e&&en(this,t,e),t}internalBinaryRead(e,t,n,i){let r=i??this.create(),a=e.pos+t;for(;e.pos<a;){let[s,o]=e.tag();if(1===s)r.relateCardType=e.int32();else{let l=n.readUnknownField;if("throw"===l)throw new globalThis.Error(`Unknown field ${s}(wire type ${o})for ${this.typeName}`);let h=e.skip(o);!1!==l&&(!0===l?d.onRead:l)(this.typeName,r,s,o,h)}}return r}internalBinaryWrite(e,t,n){0!==e.relateCardType&&t.tag(1,h.Varint).int32(e.relateCardType);let i=n.writeUnknownFields;return!1!==i&&(!0==i?d.onWrite:i)(this.typeName,e,t),t}}let tp=new tf;class t_ extends eg{constructor(){super("bilibili.app.viewunite.v1.CM",[{no:3,name:"source_content",kind:"message",repeat:1,T:()=>eb}])}create(e){let t={sourceContent:[]};return globalThis.Object.defineProperty(t,u,{enumerable:!1,value:this}),void 0!==e&&en(this,t,e),t}internalBinaryRead(e,t,n,i){let r=i??this.create(),a=e.pos+t;for(;e.pos<a;){let[s,o]=e.tag();if(3===s)r.sourceContent.push(eb.internalBinaryRead(e,e.uint32(),n));else{let l=n.readUnknownField;if("throw"===l)throw new globalThis.Error(`Unknown field ${s}(wire type ${o})for ${this.typeName}`);let h=e.skip(o);!1!==l&&(!0===l?d.onRead:l)(this.typeName,r,s,o,h)}}return r}internalBinaryWrite(e,t,n){for(let i=0;i<e.sourceContent.length;i++)eb.internalBinaryWrite(e.sourceContent[i],t.tag(3,h.LengthDelimited).fork(),n).join();let r=n.writeUnknownFields;return!1!==r&&(!0==r?d.onWrite:r)(this.typeName,e,t),t}}let t$=new t_;switch(e?.Detail?.view){case!0:default:let tm=tn.fromBinary(i);tm.cm?.sourceContent?.length&&(tm.cm.sourceContent=[],$.log(`🎉 ${$.name}`,"up主推荐广告去除")),tm.tab.tabModule[0].tab.introduction.modules=tm.tab.tabModule[0].tab.introduction.modules.map(e=>(28===e.type&&(e.data.relates.cards=e.data.relates.cards.filter(e=>5!==e.relateCardType&&4!==e.relateCardType),$.log(`🎉 ${$.name}`,"视频详情下方推荐卡广告去除")),e)),i=tn.toBinary(tm);break;case!1:$.log(`🚧 ${$.name}`,"用户设置up主推荐广告不去除")}}break;case"bilibili.app.interface.v1.Teenagers":if(PATHs?.[1]==="ModeStatus"){class tg extends eg{constructor(){super("ModeStatus",[{no:1,name:"modes",kind:"message",repeat:1,T:()=>tb}])}create(e){let t={modes:[]};return globalThis.Object.defineProperty(t,u,{enumerable:!1,value:this}),void 0!==e&&en(this,t,e),t}internalBinaryRead(e,t,n,i){let r=i??this.create(),a=e.pos+t;for(;e.pos<a;){let[s,o]=e.tag();if(1===s)r.modes.push(tb.internalBinaryRead(e,e.uint32(),n));else{let l=n.readUnknownField;if("throw"===l)throw new globalThis.Error(`Unknown field ${s}(wire type ${o})for ${this.typeName}`);let h=e.skip(o);!1!==l&&(!0===l?d.onRead:l)(this.typeName,r,s,o,h)}}return r}internalBinaryWrite(e,t,n){for(let i=0;i<e.modes.length;i++)tb.internalBinaryWrite(e.modes[i],t.tag(1,h.LengthDelimited).fork(),n).join();let r=n.writeUnknownFields;return!1!==r&&(!0==r?d.onWrite:r)(this.typeName,e,t),t}}let tw=new tg;class t0 extends eg{constructor(){super("Mode",[{no:2,name:"name",kind:"scalar",T:9},{no:5,name:"f5",kind:"message",T:()=>t8}])}create(e){let t={name:""};return globalThis.Object.defineProperty(t,u,{enumerable:!1,value:this}),void 0!==e&&en(this,t,e),t}internalBinaryRead(e,t,n,i){let r=i??this.create(),a=e.pos+t;for(;e.pos<a;){let[s,o]=e.tag();switch(s){case 2:r.name=e.string();break;case 5:r.f5=t8.internalBinaryRead(e,e.uint32(),n,r.f5);break;default:let l=n.readUnknownField;if("throw"===l)throw new globalThis.Error(`Unknown field ${s}(wire type ${o})for ${this.typeName}`);let h=e.skip(o);!1!==l&&(!0===l?d.onRead:l)(this.typeName,r,s,o,h)}}return r}internalBinaryWrite(e,t,n){""!==e.name&&t.tag(2,h.LengthDelimited).string(e.name),e.f5&&t8.internalBinaryWrite(e.f5,t.tag(5,h.LengthDelimited).fork(),n).join();let i=n.writeUnknownFields;return!1!==i&&(!0==i?d.onWrite:i)(this.typeName,e,t),t}}let tb=new t0;class ty extends eg{constructor(){super("F5",[{no:1,name:"f1",kind:"scalar",T:5}])}create(e){let t={f1:0};return globalThis.Object.defineProperty(t,u,{enumerable:!1,value:this}),void 0!==e&&en(this,t,e),t}internalBinaryRead(e,t,n,i){let r=i??this.create(),a=e.pos+t;for(;e.pos<a;){let[s,o]=e.tag();if(1===s)r.f1=e.int32();else{let l=n.readUnknownField;if("throw"===l)throw new globalThis.Error(`Unknown field ${s}(wire type ${o})for ${this.typeName}`);let h=e.skip(o);!1!==l&&(!0===l?d.onRead:l)(this.typeName,r,s,o,h)}}return r}internalBinaryWrite(e,t,n){0!==e.f1&&t.tag(1,h.Varint).int32(e.f1);let i=n.writeUnknownFields;return!1!==i&&(!0==i?d.onWrite:i)(this.typeName,e,t),t}}let t8=new ty;(data=tw.fromBinary(i)).modes=data.modes.map(e=>(e?.name==="teenagers"&&e?.f5?.f1&&(e.f5.f1=0,$.log(`🎉 ${$.name}`,"青少年模式弹窗去除")),e)),i=tw.toBinary(data)}break;case"bilibili.community.service.dm.v1.DM":class tk extends eg{constructor(){super("CommandDm",[{no:1,name:"id",kind:"scalar",T:3,L:0}])}create(e){let t={id:0n};return globalThis.Object.defineProperty(t,u,{enumerable:!1,value:this}),void 0!==e&&en(this,t,e),t}internalBinaryRead(e,t,n,i){let r=i??this.create(),a=e.pos+t;for(;e.pos<a;){let[s,o]=e.tag();if(1===s)r.id=e.int64().toBigInt();else{let l=n.readUnknownField;if("throw"===l)throw new globalThis.Error(`Unknown field ${s}(wire type ${o})for ${this.typeName}`);let h=e.skip(o);!1!==l&&(!0===l?d.onRead:l)(this.typeName,r,s,o,h)}}return r}internalBinaryWrite(e,t,n){0n!==e.id&&t.tag(1,h.Varint).int64(e.id);let i=n.writeUnknownFields;return!1!==i&&(!0==i?d.onWrite:i)(this.typeName,e,t),t}}let t3=new tk;class tv extends eg{constructor(){super("DmView",[{no:1,name:"commandDms",kind:"message",repeat:1,T:()=>t3}])}create(e){let t={commandDms:[]};return globalThis.Object.defineProperty(t,u,{enumerable:!1,value:this}),void 0!==e&&en(this,t,e),t}internalBinaryRead(e,t,n,i){let r=i??this.create(),a=e.pos+t;for(;e.pos<a;){let[s,o]=e.tag();if(1===s)r.commandDms.push(t3.internalBinaryRead(e,e.uint32(),n));else{let l=n.readUnknownField;if("throw"===l)throw new globalThis.Error(`Unknown field ${s}(wire type ${o})for ${this.typeName}`);let h=e.skip(o);!1!==l&&(!0===l?d.onRead:l)(this.typeName,r,s,o,h)}}return r}internalBinaryWrite(e,t,n){for(let i=0;i<e.commandDms.length;i++)t3.internalBinaryWrite(e.commandDms[i],t.tag(1,h.LengthDelimited).fork(),n).join();let r=n.writeUnknownFields;return!1!==r&&(!0==r?d.onWrite:r)(this.typeName,e,t),t}}let t1=new tv;class t4 extends eg{constructor(){super("DmViewReply",[{no:22,name:"dmView",kind:"message",T:()=>t1}])}create(e){let t={};return globalThis.Object.defineProperty(t,u,{enumerable:!1,value:this}),void 0!==e&&en(this,t,e),t}internalBinaryRead(e,t,n,i){let r=i??this.create(),a=e.pos+t;for(;e.pos<a;){let[s,o]=e.tag();if(22===s)r.dmView=t1.internalBinaryRead(e,e.uint32(),n,r.dmView);else{let l=n.readUnknownField;if("throw"===l)throw new globalThis.Error(`Unknown field ${s}(wire type ${o})for ${this.typeName}`);let h=e.skip(o);!1!==l&&(!0===l?d.onRead:l)(this.typeName,r,s,o,h)}}return r}internalBinaryWrite(e,t,n){e.dmView&&t1.internalBinaryWrite(e.dmView,t.tag(22,h.LengthDelimited).fork(),n).join();let i=n.writeUnknownFields;return!1!==i&&(!0==i?d.onWrite:i)(this.typeName,e,t),t}}let t6=new t4;class t2 extends eg{constructor(){super("DmSegMobileReply",[{no:1,name:"elems",kind:"message",repeat:1,T:()=>tN}])}create(e){let t={elems:[]};return globalThis.Object.defineProperty(t,u,{enumerable:!1,value:this}),void 0!==e&&en(this,t,e),t}internalBinaryRead(e,t,n,i){let r=i??this.create(),a=e.pos+t;for(;e.pos<a;){let[s,o]=e.tag();if(1===s)r.elems.push(tN.internalBinaryRead(e,e.uint32(),n));else{let l=n.readUnknownField;if("throw"===l)throw new globalThis.Error(`Unknown field ${s}(wire type ${o})for ${this.typeName}`);let h=e.skip(o);!1!==l&&(!0===l?d.onRead:l)(this.typeName,r,s,o,h)}}return r}internalBinaryWrite(e,t,n){for(let i=0;i<e.elems.length;i++)tN.internalBinaryWrite(e.elems[i],t.tag(1,h.LengthDelimited).fork(),n).join();let r=n.writeUnknownFields;return!1!==r&&(!0==r?d.onWrite:r)(this.typeName,e,t),t}}let tB=new t2;class t9 extends eg{constructor(){super("DanmakuElem",[{no:24,name:"colorful",kind:"scalar",T:5}])}create(e){let t={colorful:0};return globalThis.Object.defineProperty(t,u,{enumerable:!1,value:this}),void 0!==e&&en(this,t,e),t}internalBinaryRead(e,t,n,i){let r=i??this.create(),a=e.pos+t;for(;e.pos<a;){let[s,o]=e.tag();if(24===s)r.colorful=e.int32();else{let l=n.readUnknownField;if("throw"===l)throw new globalThis.Error(`Unknown field ${s}(wire type ${o})for ${this.typeName}`);let h=e.skip(o);!1!==l&&(!0===l?d.onRead:l)(this.typeName,r,s,o,h)}}return r}internalBinaryWrite(e,t,n){0!==e.colorful&&t.tag(24,h.Varint).int32(e.colorful);let i=n.writeUnknownFields;return!1!==i&&(!0==i?d.onWrite:i)(this.typeName,e,t),t}}let tN=new t9;switch(PATHs?.[1]){case"DmView":if(e?.Detail?.commandDms===!0){let tT=t6.fromBinary(i);tT.dmView?.commandDms?.length&&(tT.dmView.commandDms.length=0,$.log(`🎉 ${$.name}`,"交互式弹幕去除")),i=t6.toBinary(tT)}else $.log(`🎉 ${$.name}`,"用户设置交互式弹幕不去除");break;case"DmSegMobile":if(e?.Detail?.colorfulDms===!0){let tx=tB.fromBinary(i);tx.elems=tx.elems.map(e=>(e?.colorful===60001&&(e.colorful=0),e)),$.log(`🎉 ${$.name}`,"会员弹幕已替换为普通弹幕"),i=tB.toBinary(tx)}else $.log(`🎉 ${$.name}`,"用户设置会员弹幕不修改")}break;case"bilibili.main.community.reply.v1.Reply":if(PATHs?.[1]==="MainList"){class t7 extends eg{constructor(){super("MainListReply",[{no:11,name:"cm",kind:"message",T:()=>e8}])}create(e){let t={};return globalThis.Object.defineProperty(t,u,{enumerable:!1,value:this}),void 0!==e&&en(this,t,e),t}internalBinaryRead(e,t,n,i){let r=i??this.create(),a=e.pos+t;for(;e.pos<a;){let[s,o]=e.tag();if(11===s)r.cm=e8.internalBinaryRead(e,e.uint32(),n,r.cm);else{let l=n.readUnknownField;if("throw"===l)throw new globalThis.Error(`Unknown field ${s}(wire type ${o})for ${this.typeName}`);let h=e.skip(o);!1!==l&&(!0===l?d.onRead:l)(this.typeName,r,s,o,h)}}return r}internalBinaryWrite(e,t,n){e.cm&&e8.internalBinaryWrite(e.cm,t.tag(11,h.LengthDelimited).fork(),n).join();let i=n.writeUnknownFields;return!1!==i&&(!0==i?d.onWrite:i)(this.typeName,e,t),t}}let tR=new t7;switch(e?.Detail?.MainList){case!0:default:let tI=tR.fromBinary(i);delete tI.cm,i=tR.toBinary(tI),$.log(`🎉 ${$.name}`,"评论列表广告去除");break;case!1:$.log(`🎉 ${$.name}`,"用户设置评论列表广告不去除")}}break;case"bilibili.pgc.gateway.player.v2.PlayURL":case"bilibili.app.nativeact.v1.NativeAct":case"bilibili.app.interface.v1.Search":PATHs?.[1];break;case"bilibili.polymer.app.search.v1.Search":if(PATHs?.[1]==="SearchAll"){class tE extends eg{constructor(){super("bilibili.polymer.app.search.v1.Item",[{no:11,name:"game",kind:"message",oneof:"cardItem",T:()=>tL},{no:25,name:"cm",kind:"message",oneof:"cardItem",T:()=>t5}])}create(e){let t={cardItem:{oneofKind:void 0}};return globalThis.Object.defineProperty(t,u,{enumerable:!1,value:this}),void 0!==e&&en(this,t,e),t}internalBinaryRead(e,t,n,i){let r=i??this.create(),a=e.pos+t;for(;e.pos<a;){let[s,o]=e.tag();switch(s){case 11:r.cardItem={oneofKind:"game",game:tL.internalBinaryRead(e,e.uint32(),n,r.cardItem.game)};break;case 25:r.cardItem={oneofKind:"cm",cm:t5.internalBinaryRead(e,e.uint32(),n,r.cardItem.cm)};break;default:let l=n.readUnknownField;if("throw"===l)throw new globalThis.Error(`Unknown field ${s}(wire type ${o})for ${this.typeName}`);let h=e.skip(o);!1!==l&&(!0===l?d.onRead:l)(this.typeName,r,s,o,h)}}return r}internalBinaryWrite(e,t,n){"game"===e.cardItem.oneofKind&&tL.internalBinaryWrite(e.cardItem.game,t.tag(11,h.LengthDelimited).fork(),n).join(),"cm"===e.cardItem.oneofKind&&t5.internalBinaryWrite(e.cardItem.cm,t.tag(25,h.LengthDelimited).fork(),n).join();let i=n.writeUnknownFields;return!1!==i&&(!0==i?d.onWrite:i)(this.typeName,e,t),t}}let tU=new tE;class tS extends eg{constructor(){super("bilibili.polymer.app.search.v1.SearchAdCard",[{no:1,name:"json_str",kind:"scalar",T:9}])}create(e){let t={jsonStr:""};return globalThis.Object.defineProperty(t,u,{enumerable:!1,value:this}),void 0!==e&&en(this,t,e),t}internalBinaryRead(e,t,n,i){let r=i??this.create(),a=e.pos+t;for(;e.pos<a;){let[s,o]=e.tag();if(1===s)r.jsonStr=e.string();else{let l=n.readUnknownField;if("throw"===l)throw new globalThis.Error(`Unknown field ${s}(wire type ${o})for ${this.typeName}`);let h=e.skip(o);!1!==l&&(!0===l?d.onRead:l)(this.typeName,r,s,o,h)}}return r}internalBinaryWrite(e,t,n){""!==e.jsonStr&&t.tag(1,h.LengthDelimited).string(e.jsonStr);let i=n.writeUnknownFields;return!1!==i&&(!0==i?d.onWrite:i)(this.typeName,e,t),t}}let t5=new tS;class tD extends eg{constructor(){super("bilibili.polymer.app.search.v1.SearchGameCard",[{no:1,name:"title",kind:"scalar",T:9}])}create(e){let t={title:""};return globalThis.Object.defineProperty(t,u,{enumerable:!1,value:this}),void 0!==e&&en(this,t,e),t}internalBinaryRead(e,t,n,i){let r=i??this.create(),a=e.pos+t;for(;e.pos<a;){let[s,o]=e.tag();if(1===s)r.title=e.string();else{let l=n.readUnknownField;if("throw"===l)throw new globalThis.Error(`Unknown field ${s}(wire type ${o})for ${this.typeName}`);let h=e.skip(o);!1!==l&&(!0===l?d.onRead:l)(this.typeName,r,s,o,h)}}return r}internalBinaryWrite(e,t,n){""!==e.title&&t.tag(1,h.LengthDelimited).string(e.title);let i=n.writeUnknownFields;return!1!==i&&(!0==i?d.onWrite:i)(this.typeName,e,t),t}}let tL=new tD;class tF extends eg{constructor(){super("bilibili.polymer.app.search.v1.SearchAllResponse",[{no:4,name:"item",kind:"message",repeat:1,T:()=>tU}])}create(e){let t={item:[]};return globalThis.Object.defineProperty(t,u,{enumerable:!1,value:this}),void 0!==e&&en(this,t,e),t}internalBinaryRead(e,t,n,i){let r=i??this.create(),a=e.pos+t;for(;e.pos<a;){let[s,o]=e.tag();if(4===s)r.item.push(tU.internalBinaryRead(e,e.uint32(),n));else{let l=n.readUnknownField;if("throw"===l)throw new globalThis.Error(`Unknown field ${s}(wire type ${o})for ${this.typeName}`);let h=e.skip(o);!1!==l&&(!0===l?d.onRead:l)(this.typeName,r,s,o,h)}}return r}internalBinaryWrite(e,t,n){for(let i=0;i<e.item.length;i++)tU.internalBinaryWrite(e.item[i],t.tag(4,h.LengthDelimited).fork(),n).join();let r=n.writeUnknownFields;return!1!==r&&(!0==r?d.onWrite:r)(this.typeName,e,t),t}}let tO=new tF;switch(e?.Detail?.search){case!0:default:let tC=tO.fromBinary(i);tC.item=tC.item.filter(e=>!(e.cardItem?.oneofKind==="cm"||e.cardItem?.oneofKind==="game")),$.log(`🎉 ${$.name}`,"搜索页广告去除"),i=tO.toBinary(tC);break;case!1:$.log(`🚧 ${$.name}`,"用户设置搜索页广告不去除")}}}}s=newRawBody({header:ew,body:i})}$.isQuanX()?$response.bodyBytes=s:$response.body=s}case!1:}})().catch(e=>$.logErr(e)).finally(()=>{if(void 0!==$response){if($.log(`🎉 ${$.name}, finally`,"$response",`FORMAT: ${FORMAT}`,""),$response?.headers?.["Content-Encoding"]&&($response.headers["Content-Encoding"]="identity"),$response?.headers?.["content-encoding"]&&($response.headers["content-encoding"]="identity"),$.isQuanX())switch(FORMAT){case void 0:$.done({status:$response.status,headers:$response.headers});break;default:$.done({status:$response.status,headers:$response.headers,body:$response.body});break;case"application/protobuf":case"application/x-protobuf":case"application/vnd.google.protobuf":case"application/grpc":case"application/grpc+proto":case"applecation/octet-stream":$.done({status:$response.status,headers:$response.headers,bodyBytes:$response.bodyBytes.buffer.slice($response.bodyBytes.byteOffset,$response.bodyBytes.byteLength+$response.bodyBytes.byteOffset)})}else $.done($response)}});